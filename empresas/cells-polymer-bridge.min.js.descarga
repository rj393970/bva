!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.cells=t():e.cells=t()}(window,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(t){return e[t]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=7)}([,function(e,t,n){"use strict";function r(e){for(var t=e.split("."),n=[],r=0;r<t.length;r++){for(var i=t[r];"\\"===i[i.length-1]&&void 0!==t[r+1];)i=i.slice(0,-1)+".",i+=t[++r];n.push(i)}return n}var i=n(6);e.exports={get:function(e,t,n){if(!i(e)||"string"!=typeof t)return void 0===n?e:n;for(var o=r(t),a=0;a<o.length;a++){if(!Object.prototype.propertyIsEnumerable.call(e,o[a]))return n;if(e=e[o[a]],void 0===e||null===e){if(a!==o.length-1)return n;break}}return e},set:function(e,t,n){if(i(e)&&"string"==typeof t)for(var o=r(t),a=0;a<o.length;a++){var u=o[a];i(e[u])||(e[u]={}),a===o.length-1&&(e[u]=n),e=e[u]}},delete:function(e,t){if(i(e)&&"string"==typeof t)for(var n=r(t),o=0;o<n.length;o++){var a=n[o];if(o===n.length-1)return void delete e[a];if(e=e[a],!i(e))return}},has:function(e,t){if(!i(e)||"string"!=typeof t)return!1;for(var n=r(t),o=0;o<n.length;o++){if(!i(e))return!1;if(!(n[o]in e))return!1;e=e[n[o]]}return!0}}},,function(e,t,n){"use strict";function r(e){console&&console.warn&&console.warn(e)}function i(){i.init.call(this)}function o(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function a(e){return void 0===e._maxListeners?i.defaultMaxListeners:e._maxListeners}function u(e,t,n,i){var u,s,c;if(o(n),s=e._events,void 0===s?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),c=s[t]),void 0===c)c=s[t]=n,++e._eventsCount;else if("function"==typeof c?c=s[t]=i?[n,c]:[c,n]:i?c.unshift(n):c.push(n),u=a(e),u>0&&c.length>u&&!c.warned){c.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=c.length,r(l)}return e}function s(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=s.bind(r);return i.listener=n,r.wrapFn=i,i}function l(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?v(i):p(i,i.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function h(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function v(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function y(e,t){return new Promise(function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}g(e,t,o,{once:!0}),"error"!==t&&d(e,i,{once:!0})})}function d(e,t,n){"function"==typeof e.on&&g(e,"error",t,n)}function g(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function i(o){r.once&&e.removeEventListener(t,i),n(o)})}}var m,b="object"==typeof Reflect?Reflect:null,w=b&&"function"==typeof b.apply?b.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};m=b&&"function"==typeof b.ownKeys?b.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var E=Number.isNaN||function(e){return e!==e};e.exports=i,e.exports.once=y,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var _=10;Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return _},set:function(e){if("number"!=typeof e||e<0||E(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");_=e}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||E(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},i.prototype.getMaxListeners=function(){return a(this)},i.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)w(u,this,t);else for(var s=u.length,c=p(u,s),n=0;n<s;++n)w(c[n],this,t);return!0},i.prototype.addListener=function(e,t){return u(this,e,t,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(e,t){return u(this,e,t,!0)},i.prototype.once=function(e,t){return o(t),this.on(e,c(this,e,t)),this},i.prototype.prependOnceListener=function(e,t){return o(t),this.prependListener(e,c(this,e,t)),this},i.prototype.removeListener=function(e,t){var n,r,i,a,u;if(o(t),r=this._events,void 0===r)return this;if(n=r[e],void 0===n)return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){u=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():h(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,u||t)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(e){var t,n,r;if(n=this._events,void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)i=o[r],"removeListener"!==i&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],"function"==typeof t)this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},i.prototype.listeners=function(e){return l(this,e,!0)},i.prototype.rawListeners=function(e){return l(this,e,!1)},i.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},i.prototype.listenerCount=f,i.prototype.eventNames=function(){return this._eventsCount>0?m(this._events):[]}},function(e,t,n){!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function t(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach(function(e){c(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function n(){function e(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,n,r){var o=t&&t.prototype instanceof i?t:i,a=Object.create(o.prototype),u=new h(r||[]);return b(a,"_invoke",{value:c(e,n,u)}),a}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function i(){}function o(){}function a(){}function u(t){["next","throw","return"].forEach(function(n){e(t,n,function(e){return this._invoke(n,e)})})}function s(e,t){function n(i,o,a,u){var s=r(e[i],e,o);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==typeof l&&m.call(l,"__await")?t.resolve(l.__await).then(function(e){n("next",e,a,u)},function(e){n("throw",e,a,u)}):t.resolve(l).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,u)})}u(s.arg)}var i;b(this,"_invoke",{value:function(e,r){function o(){return new t(function(t,i){n(e,r,t,i)})}return i=i?i.then(o,o):o()}})}function c(e,t,n){var i=C;return function(o,a){if(i===P)throw new Error("Generator is already running");if(i===O){if("throw"===o)throw a;return{value:y,done:!0}}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=l(u,n);if(s){if(s===T)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===C)throw i=O,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=P;var c=r(e,t,n);if("normal"===c.type){if(i=n.done?O:k,c.arg===T)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=O,n.method="throw",n.arg=c.arg)}}}function l(e,t){var n=t.method,i=e.iterator[n];if(i===y)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=y,l(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),T;var o=r(i,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,T;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=y),t.delegate=null,T):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,T)}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function p(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function h(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function v(e){if(e||""===e){var t=e[E];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(m.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=y,t.done=!0,t};return r.next=r}}throw new TypeError(typeof e+" is not iterable")}n=function(){return d};var y,d={},g=Object.prototype,m=g.hasOwnProperty,b=Object.defineProperty||function(e,t,n){e[t]=n.value},w="function"==typeof Symbol?Symbol:{},E=w.iterator||"@@iterator",_=w.asyncIterator||"@@asyncIterator",S=w.toStringTag||"@@toStringTag";try{e({},"")}catch(t){e=function(e,t,n){return e[t]=n}}d.wrap=t;var C="suspendedStart",k="suspendedYield",P="executing",O="completed",T={},x={};e(x,E,function(){return this});var A=Object.getPrototypeOf,j=A&&A(A(v([])));j&&j!==g&&m.call(j,E)&&(x=j);var I=a.prototype=i.prototype=Object.create(x);return o.prototype=a,b(I,"constructor",{value:a,configurable:!0}),b(a,"constructor",{value:o,configurable:!0}),o.displayName=e(a,S,"GeneratorFunction"),d.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},d.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,e(t,S,"GeneratorFunction")),t.prototype=Object.create(I),t},d.awrap=function(e){return{__await:e}},u(s.prototype),e(s.prototype,_,function(){return this}),d.AsyncIterator=s,d.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new s(t(e,n,r,i),o);return d.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},u(I),e(I,S,"Generator"),e(I,E,function(){return this}),e(I,"toString",function(){return"[object Generator]"}),d.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},d.values=v,h.prototype={constructor:h,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.method="next",this.arg=y,this.tryEntries.forEach(p),!e)for(var t in this)"t"===t.charAt(0)&&m.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=y)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=y),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=m.call(i,"catchLoc"),u=m.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,T):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),T},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),p(n),T}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;p(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:v(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=y),T}},d}function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,n,r,i,o,a){try{var u=e[o](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function o(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){function a(e){i(s,r,o,a,u,"next",e)}function u(e){i(s,r,o,a,u,"throw",e)}var s=e.apply(t,n);a(void 0)})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function s(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e,t,n){return t=g(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){return f(e)||p(e)||h(e)||y()}function f(e){if(Array.isArray(e))return v(e)}function p(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function h(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function g(e){var t=d(e,"string");return"symbol"==typeof t?t:String(t)}function m(e,t,n,r,i){var o={};return Object.keys(r).forEach(function(e){o[e]=r[e]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function b(e){return function(){var t=o(n().mark(function t(r){var i,o,a,u,s,c;return n().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=r.url,o=r.body,a=r.headers,u={method:e,body:JSON.stringify(o),headers:{"content-type":"application/json"}},a&&Object.keys(a).forEach(function(e){var t=a[e];u.headers[e]=t}),t.next=5,fetch(i,u);case 5:return s=t.sent,c={},t.prev=7,t.next=10,s.json();case 10:c=t.sent,t.next=15;break;case 13:t.prev=13,t.t0=t.catch(7);case 15:if(s.ok||!c||400===c.status){t.next=17;break}return t.abrupt("return",null);case 17:return t.abrupt("return",c);case 18:case"end":return t.stop()}},t,null,[[7,13]])}));return function(e){return t.apply(this,arguments)}}()}function w(e){return function(t,n,r){return{configurable:!0,enumerable:r.enumerable,get:function(){return Object.defineProperty(this,n,{configurable:!0,enumerable:r.enumerable,value:E(r.value,e)}),this[n]}}}}function E(e){function t(){for(var i=this,o=arguments.length,a=new Array(o),u=0;u<o;u++)a[u]=arguments[u];t.clear(),n=setTimeout(function(){n=null,e.apply(i,a)},r)}var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:X;return t.clear=function(){n&&(clearTimeout(n),n=null)},t}var _,S,C=["consumerId","policy","mrId","nameSpace","region","dnsTld","tsec2JWTEndpoint","tsecStorageKey"],k={DEFAULT_ADAPTER_IDENTIFIER:"application",DEFAULT_ADAPTER_VERSION:"v1",REQUIRED_FIELDS:C,ALLOWED_FIELDS:[].concat(C,["identifier","version","logLevel"])},P=function(e){return function(t,n,r){return"https://".concat(e,".").concat([t,n].filter(Boolean).join("."),"/").concat(r)}},O={HOST:P("rho"),ALLOWED_FIELDS:["mrId","spanId","startDate","finishDate","name","parentSpan","traceId","properties","duration","recordDate"],REQUIRED_FIELDS:[]},T="debug",x={HOST:P("omega"),DEFAULT_LOG_LEVEL:T,ALLOWED_FIELDS:["mrId","spanId","traceId","creationDate","level","message","properties"],MAXIMUM_BULK_SIZE:1e3,REQUIRED_FIELDS:[],LOG_LEVELS:[T,"info","warn","warning","error","fatal"]},A={SEMAAS:k,RHO:O,OMEGA:x},j=function(e){var t="_",n={},i=function e(i,o){Object.keys(i).forEach(function(a){var u=i[a],s=o?o+t+a:a;u&&"object"===r(u)?e(u,s):n[s]=u})};return i(e),n},I=function(e,n){var r=t({},e);return Object.keys(r).forEach(function(e){n.includes(e)||delete r[e]}),r.properties&&(r.properties=j(r.properties)),r},R=function(e){return function(t){return Object.prototype.hasOwnProperty.call(e,t)&&!!e[t]}},L=function(e,t){return t.every(R(e))},N=function(e,t){return e.reduce(function(e,n){var r=t instanceof Function?t(n):n[t],i=e.find(function(e){return e&&e.key===r});return i?i.values.push(n):e.push({key:r,values:[n]}),e},[])},M=function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var r=e.join("");return r},D={dotify:j,sanitizeObj:I,hasProperty:R,hasProperties:L,groupBy:N,createUUID:M},F=A.OMEGA,B=F.DEFAULT_LOG_LEVEL,U=F.ALLOWED_FIELDS,G=D.sanitizeObj,H=function(){function e(t){a(this,e),this.mrId=t}return s(e,[{key:"createLog",value:function(e){var n=this.mrId,r=G(e,U),i={mrId:n,creationDate:1e6*Date.now(),level:B};return t(t({},i),r)}}]),e}(),V=A.RHO,z=V.ALLOWED_FIELDS,q=D.sanitizeObj,W=D.createUUID,Y=function(){function e(t){a(this,e),this.spanId=null,this.initialize(t)}return s(e,[{key:"initialize",value:function(e){var t=this;z.forEach(function(n){e[n]&&(t[n]=e[n])}),this.spanId=W(),this.start()}},{key:"start",value:function(){this.startDate=1e6*Date.now()}},{key:"finish",value:function(){this.finishDate=1e6*Date.now()}}]),e}(),K=function(){function e(t){a(this,e),this.mrId=t}return s(e,[{key:"createUUID",value:function(){return W()}},{key:"createSpan",value:function(e,n){var r=this.mrId,i=e.mrId,o=void 0===i?r:i,a=e.parentSpan,u=this.getParentSpan(a,o,n),s=t(t({},e),{},{mrId:o,parentSpan:u}),c=new Y(s);return c}},{key:"buildSpans",value:function(e){var t=Array.isArray(e)?l(e):[e];return t.map(function(e){return q(e,z)})}},{key:"getParentSpan",value:function(e,t,n){return e?[n,t,"spans",e].join("/"):null}}]),e}(),J={Omega:H,Rho:K},Q={GET:b("get"),POST:b("post")},$=function(){function e(){a(this,e)}return s(e,null,[{key:"get",value:function(){function e(e,n){return t.apply(this,arguments)}var t=o(n().mark(function e(t,r){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q.GET({url:t,headers:r}));case 1:case"end":return e.stop()}},e)}));return e}()},{key:"post",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=o(n().mark(function e(t,r,i){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Q.POST({url:t,body:r,headers:i}));case 1:case"end":return e.stop()}},e)}));return e}()}]),e}(),X=500,Z=function(e){return function(n,r,i){var o=i.value;return e.slice().reverse().forEach(function(e){return o=e(o)}),t(t({},i),{},{value:o})}},ee={outerDecorator:w,decorate:Z},te=D.groupBy,ne=1e3,re=function(){function e(t){a(this,e),this.items=[],this.identifier=t}return s(e,[{key:"add",value:function(e,t){var n=this,r=Array.isArray(t)?l(t):[t];r.forEach(function(t){var r={data:t,endpoint:e};n.items.push(r)})}},{key:"dump",value:function(){if(!this.any())return null;var e=te(this.items,"endpoint"),t=e[0].values,n=t.slice(0,ne),r=this.items.filter(function(e){return!n.includes(e)});return console.log("Dumping ".concat(n.length," items from ").concat(this.identifier," queue (").concat(this.items.length,")...")),this.items=r,n}},{key:"any",value:function(){return null!==this.items&&this.items.length>0}}]),e}(),ie=J.Omega,oe=J.Rho,ae=A.SEMAAS,ue=ae.REQUIRED_FIELDS,se=ae.ALLOWED_FIELDS,ce=ae.DEFAULT_ADAPTER_IDENTIFIER,le=ae.DEFAULT_ADAPTER_VERSION,fe=A.OMEGA,pe=fe.HOST,he=fe.DEFAULT_LOG_LEVEL,ve=fe.LOG_LEVELS,ye=A.RHO.HOST,de=D.hasProperties,ge=ee.outerDecorator,me=(_=ge(5e3),S=function(){function e(t){a(this,e),this.nameSpace=null,this.identifier=ce,this.mrId=null,this.consumerId=null,this.policy=null,this.region=null,this.dnsTld=null,this.version=le,this.tsec2JWTEndpoint=null,this.logLevel=he,this.apiKey=null,this.omega=null,this.rho=null,this.queue=null,this.tsecStorageKey="tsec",this.setup(t)}return s(e,[{key:"setup",value:function(e){if(!e||!this.validateConfig(e,ue))throw new Error("Invalid setup for SEMaaS adapter (".concat(this.identifier,"). Required fields: ").concat(ue.join(", "),"."));this.initialize(e)}},{key:"validateConfig",value:function(e,t){return de(e,t)}},{key:"initialize",value:function(e){var t=this;se.forEach(function(n){e[n]&&(t[n]=e[n])});var n=this.nameSpace,r=this.identifier,i=this.mrId,o=this.tsec2JWTEndpoint,a=this.region,u=this.dnsTld,s=this.version,c=this.logLevel,l=this.tsecStorageKey;this.omega=new ie(i),this.rho=new oe(i),this.queue=new re(r),console.info("SEMaaS adapter for ".concat(a," (TSEC: ").concat(o,") [").concat(u," - ").concat(s,"] (").concat(r," - ns: ").concat(n,", mrId: ").concat(i,") [logLevel: ").concat(c,"] [tsecStorageKey: ").concat(l,"] successfully initialized."))}},{key:"log",value:function(e){var t=this.omega.createLog(e);this.shouldIncludeLog(t.level,this.logLevel)&&this.enqueue(this.omegaEndpoint,t)}},{key:"ingest",value:function(e){var t=this.rho.buildSpans(e);this.enqueue(this.rhoEndpoint,t)}},{key:"createSpan",value:function(e){var t=this.rho.createSpan(e,this.prefixForChildSpan);return t}},{key:"createUUID",value:function(){var e=this.rho.createUUID();return e}},{key:"send",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=o(n().mark(function e(t,r,i){var o;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$.post(t,r,i);case 3:o=e.sent,e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:if(o){e.next=13;break}console.log("There was a problem while sending data to SEMaaS - operation will be queued."),this.enqueue(t,r),e.next=15;break;case 13:if(400!==o.status){e.next=15;break}throw new Error(o.message);case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}},e,this,[[0,6]])}));return e}()},{key:"enqueue",value:function(e,t){this.queue.add(e,t),this.flush()}},{key:"flush",value:function(){function e(){return t.apply(this,arguments)}var t=o(n().mark(function e(){var t,r,i,o,a=this;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getRequestData();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:r=t.endpoint,i=t.body,o=t.headers,this.send(r,i,o).then(function(){return a.queue.any()&&a.flush()}).catch(function(e){console.error("There was a problem while sending data to SEMaaS - ".concat(e.message))});case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"flushAll",value:function(){function e(){return t.apply(this,arguments)}var t=o(n().mark(function e(){var t,r,i,o;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getRequestData();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",Promise.resolve());case 5:return r=t.endpoint,i=t.body,o=t.headers,e.abrupt("return",this.send(r,i,o).catch(function(e){console.error("There was a problem while sending data to SEMaaS - ".concat(e.message))}));case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"getRequestData",value:function(){function e(){return t.apply(this,arguments)}var t=o(n().mark(function e(){var t,r,i,o,a,u;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureValidApiKey();case 2:if(t=e.sent){e.next=6;break}return console.log("No valid API Key for SEMaaS adapter (".concat(this.identifier,") - aborting operation")),e.abrupt("return");case 6:if(r=this.queue.dump()){e.next=10;break}return console.log("Empty queue for SEMaaS adapter (".concat(this.identifier,")")),e.abrupt("return");case 10:return i=r[0].endpoint,o=this.apiKey,console.log("Sending queued batch ".concat(i," - ").concat(o)),a=r.map(function(e){return e.data}),u=this.buildApiHeaders(),e.abrupt("return",{endpoint:i,body:a,headers:u});case 16:case"end":return e.stop()}},e,this)}));return e}()},{key:"ensureValidApiKey",value:function(){function e(){return t.apply(this,arguments)}var t=o(n().mark(function e(){return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasApiKey){e.next=3;break}return console.log("ApiKey OK -> next()"),e.abrupt("return",!0);case 3:if(!this.hasCredentials){e.next=6;break}return console.log("ApiKey KO, Credentials OK -> getApiKey()"),e.abrupt("return",this.getApiKey());case 6:return console.log("No ApiKey && No Credentials -> KO"),e.abrupt("return",!1);case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"buildApiHeaders",value:function(){var e,t;switch(this.version.toLowerCase()){case"v1":e="Authorization",t="Bearer ".concat(this.apiKey);break;default:e="Api-Key",t="jwt ".concat(this.apiKey)}return c({},e,t)}},{key:"getApiKey",value:function(){function e(){return t.apply(this,arguments)}var t=o(n().mark(function e(){var t,r,i,o,a,u,s;return n().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.consumerId,r=this.policy,i=this.tsec2JWTEndpoint,o={"x-consumer-id":t,"x-tsec-token":this.tsec,"x-validation-policy":r},a=i,e.next=5,$.get(a,o);case 5:if(u=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return s=u.accessToken,this.apiKey=s,e.abrupt("return",s);case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"hasApiKey",get:function(){return!!this.apiKey}},{key:"hasCredentials",get:function(){return!!this.consumerId&&!!this.policy&&!!this.tsec}},{key:"initialized",get:function(){return!!this.omega&&!!this.rho}},{key:"omegaEndpoint",get:function(){var e=this.nameSpace,t=this.getEndpoint(pe);return"".concat(t,"/ns/").concat(e,"/logs")}},{key:"rhoEndpoint",get:function(){var e=this.nameSpace,t=this.getEndpoint(ye);return"".concat(t,"/ns/").concat(e,"/spans")}},{key:"prefixForChildSpan",get:function(){return"ns/".concat(this.nameSpace,"/mrs")}},{key:"tsec",get:function(){return window.sessionStorage.getItem(this.tsecStorageKey)}},{key:"getEndpoint",value:function(e){var t=this.region,n=this.dnsTld,r=this.version;return e(t,n,r)}},{key:"shouldIncludeLog",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:he,n=function(e){return ve.indexOf(e.toLowerCase())},r=n(e),i=n(t);return r>=i}}]),e}(),m(S.prototype,"flush",[_],Object.getOwnPropertyDescriptor(S.prototype,"flush"),S.prototype),S);return me})},function(e,t){function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function r(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Object.values||(Object.values=function(e){return Object.keys(e).map(function(t){return e[t]})}),Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var r=n.indexOf(e,t);return r!==-1&&r===t}),Array.prototype.flat||(Array.prototype.flat=function(e){var t=[];return function e(r,i){var o,a=n(r);try{for(a.s();!(o=a.n()).done;){var u=o.value;Array.isArray(u)&&i>0?e(u,i-1):t.push(u)}}catch(e){a.e(e)}finally{a.f()}}(this,Math.floor(e)||1),t})},function(e,t,n){"use strict";e.exports=function(e){
var t=typeof e;return null!==e&&("object"===t||"function"===t)}},function(e,t,n){"use strict";function r(e){"@babel/helpers - typeof";return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e){var t=s(e,"string");return"symbol"===r(t)?t:String(t)}function s(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=v();return function(){var n,r=y(e);if(t){var i=y(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return E(e)||w(e,t)||m(e,t)||g()}function g(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],s=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return u}}function E(e){if(Array.isArray(e))return e}function _(e){"@babel/helpers - typeof";return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P(r.key),r)}}function k(e,t,n){return t&&C(e.prototype,t),n&&C(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function P(e){var t=O(e,"string");return"symbol"===_(t)?t:String(t)}function O(e,t){if("object"!==_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T.apply(this,arguments)}function x(e){"@babel/helpers - typeof";return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R(r.key),r)}}function I(e,t,n){return t&&j(e.prototype,t),n&&j(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function R(e){var t=L(e,"string");return"symbol"===x(t)?t:String(t)}function L(e,t){if("object"!==x(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function N(e){"@babel/helpers - typeof";return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,B(r.key),r)}}function F(e,t,n){return t&&D(e.prototype,t),n&&D(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function B(e){var t=U(e,"string");return"symbol"===N(t)?t:String(t)}function U(e,t){if("object"!==N(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function G(e){"@babel/helpers - typeof";return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(this,arguments)}function V(e,t){return K(e)||Y(e,t)||q(e,t)||z()}function z(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function q(e,t){if(e){if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Y(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],s=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return u}}function K(e){if(Array.isArray(e))return e}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,X(r.key),r)}}function $(e,t,n){return t&&Q(e.prototype,t),n&&Q(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function X(e){var t=Z(e,"string");return"symbol"===G(t)?t:String(t)}function Z(e,t){if("object"!==G(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==G(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function ee(e){"@babel/helpers - typeof";return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(){function e(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,n,i){var o=t&&t.prototype instanceof r?t:r,a=Object.create(o.prototype),u=new p(i||[]);return m(a,"_invoke",{value:s(e,n,u)}),a}function n(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function r(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach(function(n){e(t,n,function(e){return this._invoke(n,e)})})}function u(e,t){function r(i,o,a,u){var s=n(e[i],e,o);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==ee(l)&&g.call(l,"__await")?t.resolve(l.__await).then(function(e){r("next",e,a,u)},function(e){r("throw",e,a,u)}):t.resolve(l).then(function(e){c.value=e,a(c)},function(e){return r("throw",e,a,u)})}u(s.arg)}var i;m(this,"_invoke",{value:function(e,n){function o(){return new t(function(t,i){r(e,n,t,i)})}return i=i?i.then(o,o):o()}})}function s(e,t,r){var i=S;return function(o,a){if(i===k)throw new Error("Generator is already running");if(i===P){if("throw"===o)throw a;return{value:v,done:!0}}for(r.method=o,r.arg=a;;){var u=r.delegate;if(u){var s=c(u,r);if(s){if(s===O)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===S)throw i=P,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=k;var l=n(e,t,r);if("normal"===l.type){if(i=r.done?P:C,l.arg===O)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=P,r.method="throw",r.arg=l.arg)}}}function c(e,t){var r=t.method,i=e.iterator[r];if(i===v)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=v,c(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),O;var o=n(i,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,O;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=v),t.delegate=null,O):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,O)}function l(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function f(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(l,this),this.reset(!0)}function h(e){if(e||""===e){var t=e[w];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(g.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=v,t.done=!0,t};return r.next=r}}throw new TypeError(ee(e)+" is not iterable")}/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */te=function(){return y};var v,y={},d=Object.prototype,g=d.hasOwnProperty,m=Object.defineProperty||function(e,t,n){e[t]=n.value},b="function"==typeof Symbol?Symbol:{},w=b.iterator||"@@iterator",E=b.asyncIterator||"@@asyncIterator",_=b.toStringTag||"@@toStringTag";try{e({},"")}catch(t){e=function(e,t,n){return e[t]=n}}y.wrap=t;var S="suspendedStart",C="suspendedYield",k="executing",P="completed",O={},T={};e(T,w,function(){return this});var x=Object.getPrototypeOf,A=x&&x(x(h([])));A&&A!==d&&g.call(A,w)&&(T=A);var j=o.prototype=r.prototype=Object.create(T);return i.prototype=o,m(j,"constructor",{value:o,configurable:!0}),m(o,"constructor",{value:i,configurable:!0}),i.displayName=e(o,_,"GeneratorFunction"),y.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},y.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,_,"GeneratorFunction")),t.prototype=Object.create(j),t},y.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,E,function(){return this}),y.AsyncIterator=u,y.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new u(t(e,n,r,i),o);return y.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},a(j),e(j,_,"Generator"),e(j,w,function(){return this}),e(j,"toString",function(){return"[object Generator]"}),y.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},y.values=h,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(f),!e)for(var t in this)"t"===t.charAt(0)&&g.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=v)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=v),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=g.call(i,"catchLoc"),u=g.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&g.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,O):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),O},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),f(n),O}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;f(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:h(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=v),O}},y}function ne(e,t,n,r,i,o,a){try{var u=e[o](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function re(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){function o(e){ne(u,r,i,o,a,"next",e)}function a(e){ne(u,r,i,o,a,"throw",e)}var u=e.apply(t,n);o(void 0)})}}function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ie.apply(this,arguments)}function oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,se(r.key),r)}}function ue(e,t,n){return t&&ae(e.prototype,t),n&&ae(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function se(e){var t=ce(e,"string");return"symbol"===ee(t)?t:String(t)}function ce(e,t){if("object"!==ee(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function le(e,t){function n(){this.constructor=e}Uo(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function fe(e){return"function"==typeof e}function pe(e){setTimeout(function(){throw e},0)}function he(e){return null!==e&&"object"==typeof e}function ve(e){return e.reduce(function(e,t){return e.concat(t instanceof Wo?t.errors:t)},[])}function ye(e){for(;e;){var t=e,n=t.closed,r=t.destination,i=t.isStopped;if(n||i)return!1;e=r&&r instanceof Jo?r:null}return!0}function de(e,t,n){if(e){if(e instanceof Jo)return e;if(e[Ko])return e[Ko]()}return e||t||n?new Jo(e,t,n):new Jo(Vo)}function ge(e){return e}function me(e){return 0===e.length?ge:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}}function be(e){if(e||(e=Ho.Promise||Promise),!e)throw new Error("no Promise impl found");return e}function we(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Zo(e,t))}}function Ee(e,t,n,r){return fe(n)&&(r=n,n=void 0),r?Ee(e,t,n).pipe(we(function(e){return zo(e)?r.apply(void 0,e):r(e)})):new Xo(function(r){function i(e){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(e)}_e(e,t,i,r,n)})}function _e(e,t,n,r,i){var o;if(ke(e)){var a=e;e.addEventListener(t,n,i),o=function(){return a.removeEventListener(t,n,i)}}else if(Ce(e)){var u=e;e.on(t,n),o=function(){return u.off(t,n)}}else if(Se(e)){var s=e;e.addListener(t,n),o=function(){return s.removeListener(t,n)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var c=0,l=e.length;c<l;c++)_e(e[c],t,n,r,i)}r.add(o)}function Se(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}function Ce(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}function ke(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}function Pe(e,t){return function(n){return n.lift(new ta(e,t))}}function Oe(e){return e?Te(e):ga}function Te(e){return new Xo(function(t){return e.schedule(function(){return t.complete()})})}function xe(e){return e&&"function"==typeof e.schedule}function Ae(e,t){return new Xo(function(n){var r=new Yo,i=0;return r.add(t.schedule(function(){return i===e.length?void n.complete():(n.next(e[i++]),void(n.closed||r.add(this.schedule())))})),r})}function je(e,t){return t?Ae(e,t):new Xo(ma(e))}function Ie(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return xe(n)?(e.pop(),Ae(e,n)):je(e)}function Re(e,t){return new Xo(t?function(n){return t.schedule(Le,0,{error:e,subscriber:n})}:function(t){return t.error(e)})}function Le(e){var t=e.error,n=e.subscriber;n.error(t)}function Ne(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return("x"==t?n:3&n|8).toString(16)});return t}function Me(e){"@babel/helpers - typeof";return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function De(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ue(r.key),r)}}function Be(e,t,n){return t&&Fe(e.prototype,t),n&&Fe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ue(e){var t=Ge(e,"string");return"symbol"===Me(t)?t:String(t)}function Ge(e,t){if("object"!==Me(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Me(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function He(e){"@babel/helpers - typeof";return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,We(r.key),r)}}function qe(e,t,n){return t&&ze(e.prototype,t),n&&ze(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function We(e){var t=Ye(e,"string");return"symbol"===He(t)?t:String(t)}function Ye(e,t){if("object"!==He(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==He(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function Ke(e){"@babel/helpers - typeof";return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xe(r.key),r)}}function $e(e,t,n){return t&&Qe(e.prototype,t),n&&Qe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xe(e){var t=Ze(e,"string");return"symbol"===Ke(t)?t:String(t)}function Ze(e,t){if("object"!==Ke(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function et(e){"@babel/helpers - typeof";return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,it(r.key),r)}}function rt(e,t,n){return t&&nt(e.prototype,t),n&&nt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function it(e){var t=ot(e,"string");return"symbol"===et(t)?t:String(t)}function ot(e,t){if("object"!==et(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function at(e){"@babel/helpers - typeof";return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function st(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lt(r.key),r)}}function ct(e,t,n){return t&&st(e.prototype,t),n&&st(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function lt(e){var t=ft(e,"string");return"symbol"===at(t)?t:String(t)}function ft(e,t){if("object"!==at(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==at(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function pt(e){"@babel/helpers - typeof";return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ht(e,t,n){return t=Ct(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vt(e,t){return bt(e)||mt(e,t)||dt(e,t)||yt()}function yt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function dt(e,t){if(e){if("string"==typeof e)return gt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gt(e,t):void 0}}function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mt(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],s=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return u}}function bt(e){if(Array.isArray(e))return e}function wt(){return wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wt.apply(this,arguments)}function Et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ct(r.key),r)}}function St(e,t,n){return t&&_t(e.prototype,t),n&&_t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ct(e){var t=kt(e,"string");return"symbol"===pt(t)?t:String(t)}function kt(e,t){if("object"!==pt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function Pt(e){"@babel/helpers - typeof";return(Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ot(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,At(r.key),r)}}function xt(e,t,n){return t&&Tt(e.prototype,t),n&&Tt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function At(e){var t=jt(e,"string");return"symbol"===Pt(t)?t:String(t)}function jt(e,t){if("object"!==Pt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function It(e){"@babel/helpers - typeof";return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rt(){return Rt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rt.apply(this,arguments)}function Lt(e,t){return Bt(e)||Ft(e,t)||Mt(e,t)||Nt()}function Nt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Mt(e,t){if(e){if("string"==typeof e)return Dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dt(e,t):void 0}}function Dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ft(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],s=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return u}}function Bt(e){if(Array.isArray(e))return e}function Ut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Vt(r.key),r)}}function Ht(e,t,n){return t&&Gt(e.prototype,t),n&&Gt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Vt(e){var t=zt(e,"string");return"symbol"===It(t)?t:String(t)}function zt(e,t){if("object"!==It(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==It(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function qt(e){"@babel/helpers - typeof";return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Jt(r.key),r)}}function Kt(e,t,n){return t&&Yt(e.prototype,t),n&&Yt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jt(e){var t=Qt(e,"string");return"symbol"===qt(t)?t:String(t)}function Qt(e,t){if("object"!==qt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==qt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function $t(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}function Xt(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}function Zt(e,t){return new Xo(function(n){var r=new Yo;return r.add(t.schedule(function(){var i=e[$o]();r.add(i.subscribe({next:function(e){r.add(t.schedule(function(){return n.next(e)}))},error:function(e){r.add(t.schedule(function(){return n.error(e)}))},complete:function(){r.add(t.schedule(function(){return n.complete()}))}}))})),r})}function en(e,t){return new Xo(function(n){var r=new Yo;return r.add(t.schedule(function(){return e.then(function(e){r.add(t.schedule(function(){n.next(e),r.add(t.schedule(function(){return n.complete()}))}))},function(e){r.add(t.schedule(function(){return n.error(e)}))})})),r})}function tn(e,t){if(!e)throw new Error("Iterable cannot be null");
return new Xo(function(n){var r,i=new Yo;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(t.schedule(function(){r=e[Qa](),i.add(t.schedule(function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(e){return void n.error(e)}t?n.complete():(n.next(e),this.schedule())}}))})),i})}function nn(e){return e&&"function"==typeof e[$o]}function rn(e){return e&&"function"==typeof e[Qa]}function on(e,t){if(null!=e){if(nn(e))return Zt(e,t);if(Xt(e))return en(e,t);if(Za(e))return Ae(e,t);if(rn(e)||"string"==typeof e)return tn(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function an(e,t){return t?on(e,t):e instanceof Xo?e:new Xo(eu(e))}function un(e,t){if(!t.closed){if(e instanceof Xo)return e.subscribe(t);var n;try{n=eu(e)(t)}catch(e){t.error(e)}return n}}function sn(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?function(r){return r.pipe(sn(function(n,r){return an(e(n,r)).pipe(we(function(e,i){return t(n,e,r,i)}))},n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new ru(e,n))})}function cn(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),sn(ge,e)}function ln(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,r=null,i=e[e.length-1];return xe(i)?(r=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof i&&(n=e.pop()),null===r&&1===e.length&&e[0]instanceof Xo?e[0]:cn(n)(je(e,r))}function fn(){return cn(1)}function pn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return fn()(Ie.apply(void 0,e))}function hn(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return xe(n)?(e.pop(),function(t){return pn(e,t,n)}):function(t){return pn(e,t)}}function vn(e,t){return function(n){return n.lift(new ou(e,t))}}function yn(e){"@babel/helpers - typeof";return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,bn(r.key),r)}}function mn(e,t,n){return t&&gn(e.prototype,t),n&&gn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function bn(e){var t=wn(e,"string");return"symbol"===yn(t)?t:String(t)}function wn(e,t){if("object"!==yn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==yn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function En(e){"@babel/helpers - typeof";return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _n(){return _n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_n.apply(this,arguments)}function Sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sn(Object(n),!0).forEach(function(t){kn(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function kn(e,t,n){return t=Nn(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pn(e,t){return jn(e)||An(e,t)||Tn(e,t)||On()}function On(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Tn(e,t){if(e){if("string"==typeof e)return xn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xn(e,t):void 0}}function xn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function An(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],s=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return u}}function jn(e){if(Array.isArray(e))return e}function In(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nn(r.key),r)}}function Ln(e,t,n){return t&&Rn(e.prototype,t),n&&Rn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nn(e){var t=Mn(e,"string");return"symbol"===En(t)?t:String(t)}function Mn(e,t){if("object"!==En(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==En(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function Dn(){return Dn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Fn(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Dn.apply(this,arguments)}function Fn(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=qn(e),null!==e););return e}function Bn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Un(e,t)}function Un(e,t){return(Un=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Gn(e){var t=zn();return function(){var n,r=qn(e);if(t){var i=qn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Hn(this,n)}}function Hn(e,t){if(t&&("object"===En(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Vn(e)}function Vn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zn(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function qn(e){return(qn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wn(e){"@babel/helpers - typeof";return(Wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qn(r.key),r)}}function Jn(e,t,n){return t&&Kn(e.prototype,t),n&&Kn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qn(e){var t=$n(e,"string");return"symbol"===Wn(t)?t:String(t)}function $n(e,t){if("object"!==Wn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Wn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function Xn(e){"@babel/helpers - typeof";return(Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function er(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nr(r.key),r)}}function tr(e,t,n){return t&&er(e.prototype,t),n&&er(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function nr(e){var t=rr(e,"string");return"symbol"===Xn(t)?t:String(t)}function rr(e,t){if("object"!==Xn(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Xn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function ir(){return ir="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=or(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},ir.apply(this,arguments)}function or(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=pr(e),null!==e););return e}function ar(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ur(e,t)}function ur(e,t){return(ur=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function sr(e){var t=fr();return function(){var n,r=pr(e);if(t){var i=pr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return cr(this,n)}}function cr(e,t){if(t&&("object"===Xn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return lr(e)}function lr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function pr(e){return(pr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hr(e){"@babel/helpers - typeof";return(hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,gr(r.key),r)}}function dr(e,t,n){return t&&yr(e.prototype,t),n&&yr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function gr(e){var t=mr(e,"string");return"symbol"===hr(t)?t:String(t)}function mr(e,t){if("object"!==hr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==hr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function br(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wr(e,t)}function wr(e,t){return(wr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function Er(e){var t=Cr();return function(){var n,r=kr(e);if(t){var i=kr(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _r(this,n)}}function _r(e,t){if(t&&("object"===hr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Sr(e)}function Sr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cr(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function kr(e){return(kr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pr(e){"@babel/helpers - typeof";return(Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Or(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ar(r.key),r)}}function xr(e,t,n){return t&&Tr(e.prototype,t),n&&Tr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ar(e){var t=jr(e,"string");return"symbol"===Pr(t)?t:String(t)}function jr(e,t){if("object"!==Pr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Pr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function Ir(e){return function(t){return 0===e?Oe():t.lift(new Tu(e))}}function Rr(e){return void 0===e&&(e=null),function(t){return t.lift(new Au(e))}}function Lr(e){return void 0===e&&(e=Nr),function(t){return t.lift(new Iu(e))}}function Nr(){return new ku}function Mr(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?Pe(function(t,n){return e(t,n,r)}):ge,Ir(1),n?Rr(t):Lr(function(){return new ku}))}}function Dr(e){"@babel/helpers - typeof";return(Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Br(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Gr(r.key),r)}}function Ur(e,t,n){return t&&Br(e.prototype,t),n&&Br(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gr(e){var t=Hr(e,"string");return"symbol"===Dr(t)?t:String(t)}function Hr(e,t){if("object"!==Dr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Dr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function Vr(e){"@babel/helpers - typeof";return(Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yr(r.key),r)}}function Wr(e,t,n){return t&&qr(e.prototype,t),n&&qr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yr(e){var t=Kr(e,"string");return"symbol"===Vr(t)?t:String(t)}function Kr(e,t){if("object"!==Vr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Vr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function Jr(e){"@babel/helpers - typeof";return(Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zr(r.key),r)}}function Xr(e,t,n){return t&&$r(e.prototype,t),n&&$r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Zr(e){var t=ei(e,"string");return"symbol"===Jr(t)?t:String(t)}function ei(e,t){if("object"!==Jr(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Jr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function ti(e){"@babel/helpers - typeof";return(ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ni(){return ni=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ni.apply(this,arguments)}function ri(){function e(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,n,i){var o=t&&t.prototype instanceof r?t:r,a=Object.create(o.prototype),u=new p(i||[]);return m(a,"_invoke",{value:s(e,n,u)}),a}function n(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function r(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach(function(n){e(t,n,function(e){return this._invoke(n,e)})})}function u(e,t){function r(i,o,a,u){var s=n(e[i],e,o);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==ti(l)&&g.call(l,"__await")?t.resolve(l.__await).then(function(e){r("next",e,a,u)},function(e){r("throw",e,a,u)}):t.resolve(l).then(function(e){c.value=e,a(c)},function(e){return r("throw",e,a,u)})}u(s.arg)}var i;m(this,"_invoke",{value:function(e,n){function o(){return new t(function(t,i){r(e,n,t,i)})}return i=i?i.then(o,o):o()}})}function s(e,t,r){var i=S;return function(o,a){if(i===k)throw new Error("Generator is already running");if(i===P){if("throw"===o)throw a;return{value:v,done:!0}}for(r.method=o,r.arg=a;;){var u=r.delegate;if(u){var s=c(u,r);if(s){if(s===O)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===S)throw i=P,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=k;var l=n(e,t,r);if("normal"===l.type){if(i=r.done?P:C,l.arg===O)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=P,r.method="throw",r.arg=l.arg)}}}function c(e,t){var r=t.method,i=e.iterator[r];if(i===v)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=v,c(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),O;var o=n(i,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,O;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=v),t.delegate=null,O):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,O)}function l(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function f(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(l,this),this.reset(!0)}function h(e){if(e||""===e){var t=e[w];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(g.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=v,t.done=!0,t};return r.next=r}}throw new TypeError(ti(e)+" is not iterable")}/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ri=function(){return y};var v,y={},d=Object.prototype,g=d.hasOwnProperty,m=Object.defineProperty||function(e,t,n){e[t]=n.value},b="function"==typeof Symbol?Symbol:{},w=b.iterator||"@@iterator",E=b.asyncIterator||"@@asyncIterator",_=b.toStringTag||"@@toStringTag";try{e({},"")}catch(t){e=function(e,t,n){return e[t]=n}}y.wrap=t;var S="suspendedStart",C="suspendedYield",k="executing",P="completed",O={},T={};e(T,w,function(){return this});var x=Object.getPrototypeOf,A=x&&x(x(h([])));A&&A!==d&&g.call(A,w)&&(T=A);var j=o.prototype=r.prototype=Object.create(T);return i.prototype=o,m(j,"constructor",{value:o,configurable:!0}),m(o,"constructor",{value:i,configurable:!0}),i.displayName=e(o,_,"GeneratorFunction"),y.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},y.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,_,"GeneratorFunction")),t.prototype=Object.create(j),t},y.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,E,function(){return this}),y.AsyncIterator=u,y.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new u(t(e,n,r,i),o);return y.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},a(j),e(j,_,"Generator"),e(j,w,function(){return this}),e(j,"toString",function(){return"[object Generator]"}),y.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},y.values=h,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(f),!e)for(var t in this)"t"===t.charAt(0)&&g.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=v)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=v),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=g.call(i,"catchLoc"),u=g.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&g.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,O):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),O},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),f(n),O}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;f(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:h(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=v),O}},y}function ii(e,t,n,r,i,o,a){try{var u=e[o](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function oi(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){function o(e){ii(u,r,i,o,a,"next",e)}function a(e){ii(u,r,i,o,a,"throw",e)}var u=e.apply(t,n);o(void 0)})}}function ai(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ui(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ci(r.key),r)}}function si(e,t,n){return t&&ui(e.prototype,t),n&&ui(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ci(e){var t=li(e,"string");return"symbol"===ti(t)?t:String(t)}function li(e,t){if("object"!==ti(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ti(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function fi(e){"@babel/helpers - typeof";return(fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pi(e,t,n){return t=hi(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hi(e){var t=vi(e,"string");return"symbol"===fi(t)?t:String(t)}function vi(e,t){if("object"!==fi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==fi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function yi(){return yi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yi.apply(this,arguments)}function di(e){"function"==typeof e&&(gs=e)}function gi(e,t){var n=mi(),r=e.spec,i=e.node[Fa]||gs;return Object.defineProperty(e.node,Fa,{value:function(){return wi(e,t,i)}}),r.connections&&r.connections.in?yi(r.connections.in,n.in):r.connections?yi(r.connections,n):r.connections=n,Ba.set(e.node,e.node[Fa]()),e}function mi(){return{in:pi({},Da,{bind:Fa})}}function bi(e,t){return t.node.style.visibility=e?"initial":"hidden",!!e}function wi(e,t,n){var r=t.featureFlagCollection,i=t.ComponentConnector,o=r.value(e.spec.featureFlag),a=n.call(e.node,o,e)!==!1,u=e.spec.connections;if(a)i._updateInConnections(e.node,u.in);else if(i.subscriptors.has(e.node)){var s=Object.keys(u.in).filter(function(e){return e!==Da});i.unsubscribe(s,e.node)}return Ba.set(e.node,a),a}function Ei(e){"@babel/helpers - typeof";return(Ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Si(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ki(r.key),r)}}function Ci(e,t,n){return t&&Si(e.prototype,t),n&&Si(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ki(e){var t=Pi(e,"string");return"symbol"===Ei(t)?t:String(t)}function Pi(e,t){if("object"!==Ei(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ei(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function Oi(e){"@babel/helpers - typeof";return(Oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ti(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ji(r.key),r)}}function Ai(e,t,n){return t&&xi(e.prototype,t),n&&xi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ji(e){var t=Ii(e,"string");return"symbol"===Oi(t)?t:String(t)}function Ii(e,t){if("object"!==Oi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Oi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function Ri(e){"@babel/helpers - typeof";return(Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Li(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ni(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Di(r.key),r)}}function Mi(e,t,n){return t&&Ni(e.prototype,t),n&&Ni(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Di(e){var t=Fi(e,"string");return"symbol"===Ri(t)?t:String(t)}function Fi(e,t){if("object"!==Ri(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ri(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function Bi(){function e(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}function t(e,t,n,i){var o=t&&t.prototype instanceof r?t:r,a=Object.create(o.prototype),u=new p(i||[]);return m(a,"_invoke",{value:s(e,n,u)}),a}function n(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function r(){}function i(){}function o(){}function a(t){["next","throw","return"].forEach(function(n){e(t,n,function(e){return this._invoke(n,e)})})}function u(e,t){function r(i,o,a,u){var s=n(e[i],e,o);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==Vi(l)&&g.call(l,"__await")?t.resolve(l.__await).then(function(e){r("next",e,a,u)},function(e){r("throw",e,a,u)}):t.resolve(l).then(function(e){c.value=e,a(c)},function(e){return r("throw",e,a,u)})}u(s.arg)}var i;m(this,"_invoke",{value:function(e,n){function o(){return new t(function(t,i){r(e,n,t,i)})}return i=i?i.then(o,o):o()}})}function s(e,t,r){var i=S;return function(o,a){if(i===k)throw new Error("Generator is already running");if(i===P){if("throw"===o)throw a;return{value:v,done:!0}}for(r.method=o,r.arg=a;;){var u=r.delegate;if(u){var s=c(u,r);if(s){if(s===O)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===S)throw i=P,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=k;var l=n(e,t,r);if("normal"===l.type){if(i=r.done?P:C,l.arg===O)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=P,r.method="throw",r.arg=l.arg)}}}function c(e,t){var r=t.method,i=e.iterator[r];if(i===v)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=v,c(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),
O;var o=n(i,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,O;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=v),t.delegate=null,O):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,O)}function l(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function f(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(l,this),this.reset(!0)}function h(e){if(e||""===e){var t=e[w];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(g.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=v,t.done=!0,t};return r.next=r}}throw new TypeError(Vi(e)+" is not iterable")}/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Bi=function(){return y};var v,y={},d=Object.prototype,g=d.hasOwnProperty,m=Object.defineProperty||function(e,t,n){e[t]=n.value},b="function"==typeof Symbol?Symbol:{},w=b.iterator||"@@iterator",E=b.asyncIterator||"@@asyncIterator",_=b.toStringTag||"@@toStringTag";try{e({},"")}catch(t){e=function(e,t,n){return e[t]=n}}y.wrap=t;var S="suspendedStart",C="suspendedYield",k="executing",P="completed",O={},T={};e(T,w,function(){return this});var x=Object.getPrototypeOf,A=x&&x(x(h([])));A&&A!==d&&g.call(A,w)&&(T=A);var j=o.prototype=r.prototype=Object.create(T);return i.prototype=o,m(j,"constructor",{value:o,configurable:!0}),m(o,"constructor",{value:i,configurable:!0}),i.displayName=e(o,_,"GeneratorFunction"),y.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},y.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,o):(t.__proto__=o,e(t,_,"GeneratorFunction")),t.prototype=Object.create(j),t},y.awrap=function(e){return{__await:e}},a(u.prototype),e(u.prototype,E,function(){return this}),y.AsyncIterator=u,y.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new u(t(e,n,r,i),o);return y.isGeneratorFunction(n)?a:a.next().then(function(e){return e.done?e.value:a.next()})},a(j),e(j,_,"Generator"),e(j,w,function(){return this}),e(j,"toString",function(){return"[object Generator]"}),y.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},y.values=h,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(f),!e)for(var t in this)"t"===t.charAt(0)&&g.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=v)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=v),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=g.call(i,"catchLoc"),u=g.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&g.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,O):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),O},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),f(n),O}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;f(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:h(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=v),O}},y}function Ui(e,t,n,r,i,o,a){try{var u=e[o](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function Gi(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){function o(e){Ui(u,r,i,o,a,"next",e)}function a(e){Ui(u,r,i,o,a,"throw",e)}var u=e.apply(t,n);o(void 0)})}}function Hi(){return Hi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hi.apply(this,arguments)}function Vi(e){"@babel/helpers - typeof";return(Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yi(r.key),r)}}function Wi(e,t,n){return t&&qi(e.prototype,t),n&&qi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yi(e){var t=Ki(e,"string");return"symbol"===Vi(t)?t:String(t)}function Ki(e,t){if("object"!==Vi(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Vi(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}n.r(t);var Ji=(n(5),n(3)),Qi=n.n(Ji),$i=20,Xi=function(e){function t(){return i(this,t),n.apply(this,arguments)}c(t,e);var n=f(t);return a(t,[{key:"listenToOnce",value:function(e,t,n){e.addEventListener(t,function e(t){n(),t.currentTarget.removeEventListener(t.type,e)})}}]),t}(Qi.a),Zi=new Xi;Zi.setMaxListeners($i);var eo,to=Zi,no={ALWAYS:"always",DELAYED:"delayed",UI:"ui",CURRENTVIEW:"currentview"},ro={DEFAULT:no.ALWAYS,VALUES:Object.values(no)},io={PAGE_READY:"page-ready",PARSE_ROUTE:"parse-route",AFTER_PUBLISH:"after-publish",NAV_REQUEST:"nav-request",BEFORE_SET_ATTR_TO_NODE:"before-set-attr-to-node",AFTER_SET_ATTR_TO_NODE:"after-set-attr-to-node",BEFORE_CREATE_NODE:"before-create-node",AFTER_CREATE_NODE:"after-create-node",BEFORE_IMPORT:"before-import",AFTER_IMPORT:"after-import",PAGE_REQUEST:"page-request",PAGE_RESPONSE:"page-response",DATA_LOAD:"data-load",TEMPLATE_TRANSITION_END:"template-transition-end",TRACK_EVENT:"track-event",TEMPLATE_REGISTERED:"template-registered",ROUTER_BACKSTEP:"router-backstep",LOG_EVENT:"log-event"},oo=Object.values(io),ao="./bower_components/",uo="./composerMocks/",so="",co="login",lo="core",fo="ether.cells",po={SEMAAS:{policy:"ei_bbva_es",mrId:lo,nameSpace:fo,identifier:"bridge",consumerId:"core@ether.cells",tsecStorageKey:"tsec"}},ho="./pages/",vo={NONE:"none",DEFER:"defer",PROGRESSIVE:"progressive",HERO:"hero"},yo={DEFAULT:vo.DEFER,VALUES:Object.values(vo)},go={WORKING:"working",REQUESTED:"requested"},mo={LIT_ELEMENT:"litElement",POLYMER:"polymer"},bo={STATIC:"static",DYNAMIC:"dynamic"},wo={bindingCodes:no,binding:ro,componentsPath:ao,composerEndpoint:uo,deployEndpoint:so,externalEvents:oo,externalEventsCodes:io,initialTemplate:co,monitoring:po,pagesPath:ho,prplCodes:vo,prpl:yo,preRenderState:go,renderEngines:mo,pageTypes:bo},Eo=function(e){return e.trim().replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase()},_o=function(e){return e.trim().replace(/(-|_|\s)+(.)?/g,function(e,t,n){return n?n.toUpperCase():""})},So=function(e){return"[object Object]"===Object.prototype.toString.call(e)},Co=function(e){return function(t){return t.map(Po(e)).flat()}},ko=function(e){return function(t){return Object.entries(t).map(function(t){var n=d(t,2),r=n[0],i=n[1];return r===e?[i]:Po(e)(i)}).flat()}},Po=function(e){return function(t){return So(t)?ko(e)(t):Array.isArray(t)?Co(e)(t):[]}},Oo=["ambient","variant","disabled"],To=function(e,t,n){"boolean"==typeof n?n?e.setAttribute(t,""):e.removeAttribute(t):e.setAttribute(t,n)},xo={dasherize:Eo,camelize:_o,findProperty:Po,attributeWhiteList:Oo,setAttribute:To},Ao=wo.externalEventsCodes,jo=function(){function e(){S(this,e)}return k(e,[{key:"createComponents",value:function(e){var t=this;if(e)return e.map(function(e){var n=t.createElement(e.tagName);return n.__zone=e.zone,n})}},{key:"setProps",value:function(e,t,n){var r=Ao.BEFORE_SET_ATTR_TO_NODE,i=Ao.AFTER_SET_ATTR_TO_NODE;t&&"object"===_(t)&&(to.emit(r,e.tagName),Object.keys(t).forEach(function(r){n===mo.LIT_ELEMENT&&Oo.includes(r)?To(e,r,t[r]):e[r]=t[r]}),to.emit(i,e))}},{key:"setAttrs",value:function(e,t){t&&"object"===_(t)&&Object.keys(t).forEach(function(n){To(e,n,t[n])})}},{key:"createElement",value:function(e,t,n){var r=Ao.BEFORE_CREATE_NODE,i=Ao.AFTER_CREATE_NODE;to.emit(r,e);var o=document.createElement(e);return to.emit(i,o),t&&this.setProps(o,t,n),o}}]),e}(),Io=jo,Ro=function(){function e(){A(this,e),this.dictionary={}}return I(e,[{key:"getItem",value:function(e){return this.dictionary[e]||null}},{key:"setItem",value:function(e,t){this.dictionary[e]=t}}]),e}(),Lo=function(){function e(t){A(this,e),this.prefix="",this.persistent=!1,this.internalStorage=new Ro,T(this,t),this.persistent&&this.clear()}return I(e,[{key:"storage",get:function(){var e;try{e=this.persistent?window.localStorage:window.sessionStorage,e.setItem("_$_",{})}catch(t){e=this.internalStorage}return e}},{key:"getItem",value:function(e){return JSON.parse(this.storage.getItem(this.prefix+e))}},{key:"setItem",value:function(e,t){this.storage.setItem(this.prefix+e,JSON.stringify(t,"",!0))}},{key:"clear",value:function(){var e=new RegExp("^("+this.prefix+")");for(var t in this.storage)this.storage.hasOwnProperty(t)&&e.test(t)&&this.storage.removeItem(t)}}]),e}(),No=function(){function e(){M(this,e)}return F(e,[{key:"_get",value:function(e,t){return new Promise(function(n,r){var i=new XMLHttpRequest;if(!e||!e.url)return void r(new Error("URL not defined"));var o=(e.method||"").toUpperCase()||"GET";i.addEventListener("load",function(e){var i=e.target,o=i.status;o>=200&&o<300||0==o&&i.responseText.length>0?n("json"===t?JSON.parse(i.response):i.responseText):r(new Error(i.statusText))}),i.addEventListener("error",function(){r(new Error("Network Error"))}),i.open(o,e.url);var a=e.headers;for(var u in a)a.hasOwnProperty(u)&&i.setRequestHeader(u,a[u]);i.send(e.body)})}},{key:"getJSON",value:function(e){return this._get(e,"json")}},{key:"getHTML",value:function(e){return this._get(e,"html")}}]),e}(),Mo=function(e){var t=e.familyPath,n=e.tag,r=e.tagName,i=n||r,o=t||i;return"".concat(o,"/").concat(i,".html")},Do=function(){function e(){J(this,e)}return $(e,[{key:"_buildConfig",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"UI",n=e.type,r=e.tag,i=e.tagName,o=e.zone,a=e.fixed,u=e.container,s=e.priority,c=e.properties,l=e.render,f=e.featureFlag,p=e.attributes,h=Mo(e),v=n?n.toUpperCase():t,y={type:v,tagName:r||i,zone:o,fixed:a,container:u,priority:s,properties:c||{},attributes:p||{},path:h,render:l,featureFlag:f};return this._parseConnections(y)}},{key:"parse",value:function(e){var t=/^\/(\b)/,n=this._parseComponentsFromJson(e,"components","UI"),r=e.template;r&&(r=this._buildConfig(r,"TEMPLATE"));var i={},o=e.pages;return o&&Object.entries(o).forEach(function(e){var n=V(e,2),r=n[0],o=n[1].url;i[r]="/"+o.replace(t,"")}),{page:e.page,currentPage:e.currentPage||{},template:r,components:n,pages:i}}},{key:"_parseComponentsFromJson",value:function(e,t,n){var r=this,i=Array.isArray(e[t])?e[t]:[];return i.map(function(e){return r._buildConfig(e,n)})}},{key:"_parseConnections",value:function(e){var t=this._normalizeComponentDefinition(e),n=t.properties.cellsConnections;if(!n||!Object.keys(n).length>0)return t;var r=H({},t);if(n.params){var i=this._parseConnectionsParams(n.params);n.in||(n.in={}),n.out||(n.out={}),H(n.in,i.in),H(n.out,i.out)}return r.connections=n,r}},{key:"_normalizeComponentDefinition",value:function(e){return H({properties:{cellsConnections:{in:{},out:{}}}},e)}},{key:"_parseConnectionsParams",value:function(e){var t={in:{},out:{}};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],i=Eo(n)+"-changed";t.in[r]=this._createConnection(n),t.out[r]=this._createConnection(i)}return t}},{key:"_createConnection",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{bind:e,global:t}}},{key:"split",value:function(e){var t;if(e){t={CC:[],UI:[],DM:[]};for(var n=0;n<e.length;n++){var r=e[n];t[r.type].push(r)}}return t}}]),e}(),Fo=wo.externalEventsCodes,Bo=function(){function e(t){oe(this,e),this._initCellsPageManager(t)}return ue(e,[{key:"_initCellsPageManager",value:function(e){var t=e.htmlPagesPath,n=void 0===t?"./pages/":t,r=e.htmlPages,i=e.templatesPath,o=e.composerEndpoint,a=e.remoteTemplates,u=e.appId,s=e.getPlatform,c=e.cache,l=e.storagePrefix,f=e.composerEngine,p=e.TemplateManager,h=new Lo({prefix:l,persistent:c}),v=new No,y=new Do;ie(this,{storage:h,htmlPagesPath:n,htmlPages:r,templatesPath:i,composerEndpoint:o,remoteTemplates:a,appId:u,getPlatform:s,cache:c,connector:v,sanitizer:y,composerEngine:f,TemplateManager:p})}},{key:"_remoteTemplate",value:function(e){var t=this.composerEndpoint.replace(/{appId}/,this.appId);return this.getPlatform&&(t=t.replace(/{platform}/,this.getPlatform())),t=t.replace(/{page}/,e)}},{key:"_localTemplate",value:function(e){var t=this.templatesPath?this.templatesPath:this.composerEndpoint;return"".concat(t).concat(e,".json")}},{key:"_isLocalComposer",value:function(e){var t=!0,n=this.templatesPath&&this.templatesPath.length>0,r=this.remoteTemplates&&this.remoteTemplates.length>0,i=this.composerEndpoint&&!n&&!r;return t=i?0!==this.composerEndpoint.indexOf("http"):!this.composerEndpoint||!this.remoteTemplates||this.remoteTemplates.indexOf(e)<0}},{key:"_renderComposerEndpoint",value:function(e){return this._isLocalComposer(e)?this._localTemplate(e):this._remoteTemplate(e)}},{key:"generateRequestUrl",value:function(e){return this.htmlPages&&this.htmlPages.indexOf(e)>=0?this.htmlPagesPath+e+".html":this._renderComposerEndpoint(e)}},{key:"onPageDefinitionNotFound",value:function(e){}},{key:"clear",value:function(){this.storage.clear()}},{key:"get",value:function(e,t,n){var r,i=this.composerEngine&&!this._isLocalComposer(e);return i?(this.TemplateManager.removeTemplate(e),this._getFromComposerEngine(e,t)):(r=this.storage.getItem(e),this.cache&&r?Promise.resolve(r):this._getFromConnector(e,t,n))}},{key:"_getFromComposerEngine",value:function(e,t){var n=JSON.parse(this.composerEngine.getPage(e));return Promise.resolve(this._onResponse(e,t,n))}},{key:"_getFromConnector",value:function(e,t,n){var r=this,i=Fo.PAGE_REQUEST;return t=t||{},t.url=this.generateRequestUrl(e,t,n),to.emit(i,t),this.connector.getJSON(t).then(function(n){return r._onResponse(e,t,n)}).catch(function(){var t=re(te().mark(function t(n){return te().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r._onResponseFail(e);case 2:return n=t.sent,console.error(n),t.abrupt("return",n.message);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"getPage",value:function(e,t){var n=this,r=Fo.PAGE_REQUEST;return t=t||{},t.url=this.generateRequestUrl(e),to.emit(r,t),this.connector.getHTML(t).then(function(r){return n._onResponseHTML(e,t,r)}).catch(function(t){return n._onResponseFail(e),console.error(t),t.message})}},{key:"_onResponse",value:function(e,t,n){var r=Fo.PAGE_RESPONSE,i=Fo.DATA_LOAD;n.page=e,to.emit(r,n);var o=this.sanitizer.parse(n);return this.storage.setItem(e,o),to.emit(i,o),o}},{key:"_onResponseHTML",value:function(e,t,n){var r=Fo.PAGE_RESPONSE,i=Fo.DATA_LOAD,o={page:e,html:n};to.emit(r,o);var a={page:e,currentPage:{},template:{},components:[],pages:[],html:n};return this.storage.setItem(e,a),to.emit(i,a),a}},{key:"_onResponseFail",value:function(e){return this.onPageDefinitionNotFound&&this.onPageDefinitionNotFound(e),Promise.reject(new Error("Definition file for page '".concat(e,"' not found.")))}}]),e}(),Uo=function(e,t){return(Uo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},Go=!1,Ho={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else Go&&console.log("RxJS: Back to a better error behavior. Thank you. <3");Go=e},get useDeprecatedSynchronousErrorHandling(){return Go}},Vo={closed:!0,next:function(e){},error:function(e){if(Ho.useDeprecatedSynchronousErrorHandling)throw e;pe(e)},complete:function(){}},zo=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}(),qo=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),Wo=qo,Yo=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this,r=n._parentOrParents,i=n._ctorUnsubscribe,o=n._unsubscribe,a=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof e)r.remove(this);else if(null!==r)for(var u=0;u<r.length;++u){var s=r[u];s.remove(this)}if(fe(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(e){t=e instanceof Wo?ve(e.errors):[e]}}if(zo(a))for(var u=-1,c=a.length;++u<c;){var l=a[u];if(he(l))try{l.unsubscribe()}catch(e){t=t||[],e instanceof Wo?t=t.concat(ve(e.errors)):t.push(e)}}if(t)throw new Wo(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;n=new e,n._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(i.indexOf(this)!==-1)return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);n!==-1&&t.splice(n,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}(),Ko=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),Jo=function(e){function t(n,r,i){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=Vo;break;case 1:if(!n){o.destination=Vo;break}if("object"==typeof n){n instanceof t?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new Qo(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new Qo(o,n,r,i)}return o}return le(t,e),t.prototype[Ko]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(Yo),Qo=function(e){function t(t,n,r,i){var o=e.call(this)||this;o._parentSubscriber=t;var a,u=o;return fe(n)?a=n:n&&(a=n.next,r=n.error,i=n.complete,n!==Vo&&(u=Object.create(n),fe(u.unsubscribe)&&o.add(u.unsubscribe.bind(u)),u.unsubscribe=o.unsubscribe.bind(o))),o._context=u,o._next=a,o._error=r,o._complete=i,o}return le(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;Ho.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=Ho.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):pe(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;pe(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};Ho.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),Ho.useDeprecatedSynchronousErrorHandling)throw e;pe(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!Ho.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return Ho.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(pe(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(Jo),$o=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}(),Xo=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,i=de(e,t,n);if(r?i.add(r.call(i,this.source)):i.add(this.source||Ho.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),Ho.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){Ho.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),ye(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=be(t))(function(t,r){var i;i=n.subscribe(function(t){try{e(t)}catch(e){r(e),i&&i.unsubscribe()}},r,t)})},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[$o]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:me(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=be(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}(),Zo=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new ea(e,this.project,this.thisArg))},e}(),ea=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return le(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Jo),ta=(function(){return Object.prototype.toString}(),function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new na(e,this.predicate,this.thisArg))},e}()),na=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return le(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(Jo),ra=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),ia=ra,oa=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return le(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);n!==-1&&t.splice(n,1)}}},t}(Yo),aa=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return le(t,e),t}(Jo),ua=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return le(t,e),t.prototype[Ko]=function(){return new aa(this)},t.prototype.lift=function(e){var t=new sa(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new ia;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new ia;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new ia;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new ia;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new ia;return this.hasError?(e.error(this.thrownError),Yo.EMPTY):this.isStopped?(e.complete(),Yo.EMPTY):(this.observers.push(e),new oa(this,e))},t.prototype.asObservable=function(){var e=new Xo;return e.source=this,e},t.create=function(e,t){return new sa(e,t)},t}(Xo),sa=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return le(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){var t=this.source;return t?this.source.subscribe(e):Yo.EMPTY},t}(ua),ca=function(e){function t(t,n){return e.call(this)||this}return le(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(Yo),la=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return le(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){return void 0===n&&(n=0),null!==n&&this.delay===n&&this.pending===!1?t:void clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);return n?n:void(this.pending===!1&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null)))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,r!==-1&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(ca),fa=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return le(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(la),pa=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),ha=function(e){function t(n,r){void 0===r&&(r=pa.now);var i=e.call(this,n,function(){return t.delegate&&t.delegate!==i?t.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return le(t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)return void t.push(e);var n;this.active=!0;do if(n=e.execute(e.state,e.delay))break;while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}},t}(pa),va=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return le(t,e),t}(ha),ya=new va(fa),da=ya,ga=new Xo(function(e){return e.complete()}),ma=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}};!function(e){e.NEXT="N",e.ERROR="E",e.COMPLETE="C"}(eo||(eo={}));var ba=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){var r=this.kind;switch(r){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return Ie(this.value);case"E":return Re(this.error);case"C":return Oe()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return"undefined"!=typeof t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}(),wa=(function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new wa(e,this.scheduler,this.delay))},e}(),function(e){function t(t,n,r){
void 0===r&&(r=0);var i=e.call(this,t)||this;return i.scheduler=n,i.delay=r,i}return le(t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){var n=this.destination;n.add(this.scheduler.schedule(t.dispatch,this.delay,new Ea(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(ba.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(ba.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(ba.createComplete()),this.unsubscribe()},t}(Jo)),Ea=function(){function e(e,t){this.notification=e,this.destination=t}return e}(),_a=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=t<1?1:t,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return le(t,e),t.prototype.nextInfiniteTimeWindow=function(t){if(!this.isStopped){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift()}e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this.isStopped||(this._events.push(new Sa(this._getNow(),t)),this._trimBufferThenGetEvents()),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new ia;if(this.isStopped||this.hasError?t=Yo.EMPTY:(this.observers.push(e),t=new oa(this,e)),i&&e.add(e=new wa(e,i)),n)for(var a=0;a<o&&!e.closed;a++)e.next(r[a]);else for(var a=0;a<o&&!e.closed;a++)e.next(r[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||da).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&r.splice(0,o),r},t}(ua),Sa=function(){function e(e,t){this.time=e,this.value=t}return e}(),Ca=function(){var e=new _a(1),t=e.next.bind(e);return e.next=function(e){e.uuid||(e.uuid=Ne()),e.time||(e.time=(new Date).getTime()),t(e)},e.hasObservers=function(){if(this.closed)throw new Error;return this.observers.length>0},e.complete=function(){},e.error=function(e){this.observers.forEach(function(t){t.isStopped=!1,t.onError(e)})},e.unsubscribe=function(e){this.observers.splice(e,1)},e.unsubscribeAll=function(){this.observers.splice(0,this.observers.length)},e.clean=function(){this._events=[],this.observers=[]},e.dispose=function(){this.unsubscribe()},e},ka=Ca,Pa=function(){function e(t){De(this,e),this.node=t,this.subscriptions=[],this.publications=new Yo}return Be(e,[{key:"hasSubscription",value:function(e){return this.subscriptions.filter(function(t){return t.channel===e}).length>0}},{key:"publish",value:function(e){this.publications.add(e)}},{key:"makeCallbackWithNoReplay",value:function(e,t){t.node.intervals||(t.node.intervals=[]),t.node.ids||(t.node.ids=[]);var n=function(t){return t.intervals[e.name]},r=function(t,n){t.intervals[e.name]=n},i=function(e){return e._events.length>0?e._events[0].time:1},o=function(t){return t.ids[e.name]},a=function(t,n){t.ids[e.name]=n},u=function(e){return e._events.length>0?e._events[0].uuid:null},s=function(){var s=i(e),c=n(t.node),l=u(e),f=o(t.node);return!c||c<s||c===s&&f!=l?(r(t.node,s),a(t.node,l),t.apply(this,arguments)):void r(t.node,s)}.bind(this);return s.node=t.node,s}},{key:"subscribe",value:function(e,t,n,r){if(!this.hasSubscription(e)){var i,o=t;n===!1&&(o=this.makeCallbackWithNoReplay(e,t));var a=this._firstInstanceOfObserver(o.node,e);a===-1?(i=e.subscribe(o),a=e.observers.length-1):i=e.observers[a],i.node=o.node;var u={channel:e,bind:r,observer:i,subscription:i};this.subscriptions.push(u)}}},{key:"unsubscribe",value:function(e){this.subscriptions.forEach(function(t){var n=t.channel,r=t.observer,i=n.observers.indexOf(r);i>=0&&(e!==!0&&n.name.match(/\b__bridge_/)||n.unsubscribe(i))}),this.publications.unsubscribe()}},{key:"_firstInstanceOfObserver",value:function(e,t){return t.observers.findIndex(function(t){return t.node===e})}}]),e}(),Oa=function(e){return e.toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()})},Ta=function(){function e(t){Ve(this,e),this.componentConnector=t}return qe(e,[{key:"isUnresolved",value:function(e){var t=e.tagName.includes("-"),n=this._isPolymerElement(e);return t&&!n}},{key:"isInstance",value:function(e){var t=e.tagName.includes("-");return t&&!this.isUnresolved(e)}},{key:"isEventAtTarget",value:function(e){var t;if(Polymer&&Polymer.Settings&&(Polymer.Settings.hasShadow===!1||Polymer.Settings.useShadow===!1)){var n=Polymer.dom(e);t=n.localTarget===e.currentTarget}else{var r=Event.AT_TARGET||Event.prototype.AT_TARGET;t=e.eventPhase===r}return t}},{key:"dispatchActionFunction",value:function(e,t,n){var r,i=this._getPropertyChangedName(e.type);r=i&&e.detail&&e.detail.hasOwnProperty("value")?Polymer&&Polymer.dom(e).rootTarget?Polymer.dom(e).rootTarget[i]:e.detail.value:e.detail,"function"==typeof n?n(r):t[n](r)}},{key:"dispatchActionProperty",value:function(e,t,n){var r,i=this._parseActionInEvent(e,n,t);if(t&&t.constructor._finalize){var o=t.constructor.properties[i.property];return o?void(t[i.property]=i.value):this._handleAttribute(t,i)}return(t&&t.getPropertyInfo||void 0!==Polymer.Element&&t instanceof Polymer.Element==!1)&&(r=t.getPropertyInfo?t.getPropertyInfo(i.property):this._getTargetProperties(t)[i.property],r&&r.defined&&!r.readOnly&&!r.computed)?t.set(i.path,i.value):(t&&void 0===t.getPropertyInfo||void 0!==Polymer.Element&&t instanceof Polymer.Element==!1)&&(r=void 0!==this._getTargetProperties(t)?this._getTargetProperties(t)[i.property]:void 0,r&&!r.readOnly&&!r.computed)?t.set(i.path,i.value):this._handleAttribute(t,i)}},{key:"processFirstTimeConnections",value:function(e,t){if(e&&t&&!e.__isCellsConnected){if(t.in)for(var n in t.in)t.in.hasOwnProperty(n)&&this.componentConnector.manager.get(n)._events[0]&&(t.ignoreAttr?t.ignoreAttr.push(t.in[n].bind):t.ignoreAttr=[t.in[n].bind]);if(t.out)for(var r in t.out)if(t.out.hasOwnProperty(r)){var i=this._getPropertyChangedName(t.out[r].bind),o=this._whichPolymerVersion(e);if(2===o){if(i&&e.__data&&!this.componentConnector.manager.get(r)._events[0]&&e&&e._hasReadOnlyEffect&&!e._hasReadOnlyEffect(i)&&!e._hasComputedEffect(i)){var a=e[i];e.__data[i]=void 0,e[i]=a}}else if(i&&e.__data__&&!this.componentConnector.get(r)._events[0]&&e&&e.getPropertyInfo){var u=e.getPropertyInfo(i);if(u.defined&&!u.readOnly&&!u.computed){var s=e[i];e.__data__[i]=void 0,e[i]=s}}}e.__isCellsConnected=!0}}},{key:"_whichPolymerVersion",value:function(e){var t=-1,n=function(){},r=window.Polymer||{},i=r.Element,o=void 0===i?n:i,a=r.ElementMixin,u=void 0===a?n:a,s=r.LegacyElementMixin,c=void 0===s?n:s,l=e.__isPolymerInstance__===!0,f=e instanceof o||e instanceof u||e instanceof c||void 0!==e.is&&void 0!==e.ready&&void 0!==e.notifyPath;return f?t=2:l&&(t=1),t}},{key:"_isPolymerElement",value:function(e){return this._whichPolymerVersion(e)>0}},{key:"_getTargetProperties",value:function(e){var t;return e.constructor.config?t=e.constructor.config.properties:e.constructor._properties&&(t=e.constructor._properties),t}},{key:"_handleAttribute",value:function(e,t){var n=t.value,r=t.path;return"boolean"!=typeof n||n?e.setAttribute(r,n):e.removeAttribute(r)}},{key:"_getPropertyChangedName",value:function(e){var t,n="-changed";return e.indexOf(n,e.length-n.length)!==-1&&(t=e.slice(0,-n.length),t=Oa(t)),t}},{key:"_parseActionInEvent",value:function(e,t,n){var r,i,o=this._getPropertyChangedName(e.type);return o&&e.detail&&e.detail.hasOwnProperty("value")?(i=e.detail.value,t=t||o,r=e.detail.path?e.detail.path.replace(o,t):t):(r=t,i=e.detail),void 0!==n&&void 0===n.is&&"object"===He(i)&&(Polymer&&void 0===Polymer.Element?i=JSON.stringify(i):(Polymer&&n instanceof Polymer.Element)===!1&&(i=JSON.stringify(i))),{path:r,value:i,property:t}}}]),e}(),xa=function(e){return e.toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()})},Aa=function(){function e(t){var n=this;Je(this,e),this._parseActionInEvent=function(e,t,r){var i,o,a=n._getProperyChangedName(e.type);return a&&e.detail&&e.detail.hasOwnProperty("value")?(i=e.detail.value,t=t||a,o=e.detail.path?e.detail.path.replace(a,t):t):(o=t,i=e.detail),{path:o,value:i,property:t}},this.componentConnector=t}return $e(e,[{key:"isUnresolved",value:function(e){var t=e.tagName.includes("-"),n=e.updateComplete instanceof Promise&&"function"==typeof e.render;return t&&!n}},{key:"isInstance",value:function(e){var t=e.tagName.includes("-");return t&&!this.isUnresolved(e)}},{key:"isEventAtTarget",value:function(e){var t=Event.AT_TARGET||Event.prototype.AT_TARGET;return e.eventPhase===t}},{key:"dispatchActionFunction",value:function(e,t,n){var r=e.detail;"function"==typeof n?n(r):t[n](r)}},{key:"dispatchActionProperty",value:function(e,t,n){var r=this._parseActionInEvent(e,n,t);Oo.includes(n)?To(t,n,r.value):t[n]=r.value}},{key:"processFirstTimeConnections",value:function(e,t){if(e&&t&&!e.__isCellsConnected){if(t.in)for(var n in t.in)t.in.hasOwnProperty(n)&&this.componentConnector.manager.get(n)._events[0]&&(t.ignoreAttr?t.ignoreAttr.push(t.in[n].bind):t.ignoreAttr=[t.in[n].bind]);e.__isCellsConnected=!0}}},{key:"_getProperyChangedName",value:function(e){var t,n="-changed";return e.indexOf(n,e.length-n.length)!==-1&&(t=e.slice(0,-n.length),t=xa(t)),t}}]),e}(),ja=function(e){return e.toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()})},Ia=function(){function e(t){tt(this,e),this.componentConnector=t}return rt(e,[{key:"isUnresolved",value:function(e){return!1}},{key:"isInstance",value:function(e){var t=e.tagName.includes("-");return Boolean(!t||customElements.get(e.tagName.toLowerCase()))}},{key:"isEventAtTarget",value:function(e){return e.eventPhase===Event.AT_TARGET}},{key:"dispatchActionFunction",value:function(e,t,n){var r=e.detail;"function"==typeof n?n(r):t[n](r)}},{key:"dispatchActionProperty",value:function(e,t,n){var r=this._parseActionInEvent(e,n,t);return t[r.property]=r.value}},{key:"processFirstTimeConnections",value:function(e,t){if(e&&t&&!e.__isCellsConnected){if(t.in)for(var n in t.in)t.in.hasOwnProperty(n)&&this.componentConnector.manager.get(n)._events[0]&&(t.ignoreAttr?t.ignoreAttr.push(t.in[n].bind):t.ignoreAttr=[t.in[n].bind]);e.__isCellsConnected=!0}}},{key:"_getProperyChangedName",value:function(e){var t,n="-changed";return e.indexOf(n,e.length-n.length)!==-1&&(t=e.slice(0,-n.length),t=ja(t)),t}},{key:"_parseActionInEvent",value:function(e,t,n){var r,i,o=this._getProperyChangedName(e.type);return o&&e.detail&&e.detail.hasOwnProperty("value")?(r=e.detail.value,t=t||o,i=e.detail.path?e.detail.path.replace(o,t):t):(i=t,r=e.detail),void 0!==n&&void 0===n.is&&"object"===et(r)&&(r=JSON.stringify(r)),{path:i,value:r,property:t}}}]),e}(),Ra=0,La=1,Na=2,Ma=function(){function e(t){ut(this,e),this.adapters=new Array(2),this.adapters[Ra]=new Ta(t),this.adapters[La]=new Aa(t),this.adapters[Na]=new Ia(t)}return ct(e,[{key:"getNodeAdapter",value:function(e){return this.adapters.find(function(t){return t.isInstance(e)})||this.adapters[Ra]}},{key:"getAdapterByName",value:function(e){var t;switch(e){case"polymer":t=Ra;break;case"litElement":t=La;break;case"vanilla":t=Na;break;default:t=Ra}return this.adapters[t]}},{key:"getComponentAdapter",value:function(e){var t=e.spec&&e.spec.render;return this.getAdapterByName(t)}}]),e}(),Da="__bridge_ch_featureflag",Fa="featureFlagChangedCallback",Ba=new Map,Ua=function(){function e(t){Et(this,e),this._featureCollection={},this._connector=t.ComponentConnector}return St(e,[{key:"collection",get:function(){return JSON.parse(JSON.stringify(this._featureCollection))}},{key:"add",value:function(e){this._featureCollection[e.key]=e}},{key:"value",value:function(e){var t=e.key,n=e.defaultValue,r=e.value,i=this._featureCollection;return i.hasOwnProperty(t)&&i[t].hasOwnProperty("value")?i[t].value:i.hasOwnProperty(t)&&i[t].hasOwnProperty("defaultValue")?i[t].defaultValue:void 0!==r?r:n}},{key:"extend",value:function(e){return wt(this._featureCollection,e),this._publish()}},{key:"register",value:function(e){var t=this;return Object.entries(e).map(function(e){var t=vt(e,2),n=t[0],r=t[1].defaultValue;return ht({},n,r)}).forEach(function(e){return wt(t._featureCollection,e)}),this._publish()}},{key:"update",value:function(e){return this.extend(e.features)}},{key:"subscribe",value:function(e){var t=this;return"function"==typeof e&&this._connector.manager.get(Da).subscribe(function(){return e(t)}),this}},{key:"_publish",value:function(){var e=this._connector.manager.get(Da);return e.next(new CustomEvent(Da,{detail:this.collection})),this}}]),e}(),Ga=function(){function e(){Ot(this,e),this.channels={}}return xt(e,[{key:"get",value:function(e){var t=this.channels[e];return null==t&&(t=this.create(e)),t}},{key:"getUnsafe",value:function(e){return this.channels[e]}},{key:"create",value:function(e){var t=ka();return t.name=e,this.channels[e]=t,t}},{key:"remove",value:function(e){delete this.channels[e]}},{key:"unregisterAllSubscriptors",value:function(){this.ComponentConnector.subscriptors.forEach(function(e){e.subscriptions.forEach(function(e){return e.subscription.unsubscribe()})})}},{key:"cleanAllChannels",value:function(){for(var e in this.channels)this.channels.hasOwnProperty(e)&&this.channels[e].clean()}},{key:"removeAllChannels",value:function(){for(var e in this.channels)this.channels.hasOwnProperty(e)&&delete this.channels[e]}},{key:"has",value:function(e){return null!=this.channels[e]}}]),e}(),Ha=wo.externalEventsCodes,Va=function(){function e(t){Ut(this,e),this.adapterResolver=new Ma(this),this.manager=new Ga,this.subscriptors=new Map,this.bridgeChannelsPrefix=/__bridge_(?!ch)/,this.bridge=t}return Ht(e,[{key:"getSubscriptor",value:function(e){var t=this.subscriptors.get(e);return t||(t=new Pa(e),this.subscriptors.set(e,t)),t}},{key:"registerComponent",value:function(e){var t=e.node,n=e.connections,r=this.adapterResolver.getComponentAdapter(e);t&&n&&(this._registerOutConnections(t,n.out),this._registerInConnections(t,n.in)),r.processFirstTimeConnections(t,n)}},{key:"progressiveRegisterConnections",value:function(e,t){e&&t&&(this._registerOutConnections(e,t.out),this._updateInConnections(e,t.in))}},{key:"_registerInConnections",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.entries(n).forEach(function(n){var r=Lt(n,2),i=r[0],o=r[1],a=o.bind,u=o.previousState,s=void 0!==u&&u;t.addSubscription(i,e,a,s)})}},{key:"addSubscription",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this._wrapCallbackWithNode(t,n),o=this.manager.get(e);if(o){var a=this.getSubscriptor(t);a.subscribe(o,i,r,n)}}},{key:"_updateInConnections",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.entries(n).forEach(function(n){var r=Lt(n,2),i=r[0],o=r[1],a=o.bind,u=o.previousState,s=void 0!==u&&u;t.updateSubscription(i,e,a,s)})}},{key:"updateSubscription",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.getSubscriptor(t);if(this.isActiveBridgeChannel(e)||!this.isActiveBridgeChannel(e)&&!this.hasSubscriptions(i,e)){var o=this.manager.get(e),a=this._wrapCallbackWithNode(t,n);i.subscribe(o,a,r,n)}}},{key:"_wrapCallbackWithNode",value:function(e,t){var n=this.wrapCallback(e,t);return n.node=e,n}},{key:"wrapCallback",value:function(e,t){var n=this,r=function(e){setTimeout(function(){"requestIdleCallback"in window?window.requestIdleCallback(e):setTimeout(e,1)},100)};return function(i){var o=n.adapterResolver.getNodeAdapter(e),a=function n(a,u){o.isUnresolved(e)?r(n):("function"==typeof t||"function"==typeof e[t]?o.dispatchActionFunction(i,e,t):o.dispatchActionProperty(i,e,t),u&&u.disconnect())};if(o.isUnresolved(e)){var u=new MutationObserver(a),s={attributes:!1,childList:!0,characterData:!0};u.observe(e,s),r(a,100)}else a()}}},{key:"_hasPublisher",value:function(e,t,n,r){var i=e.publications;return Boolean((i._subscriptions||[]).find(function(e){return e.node===t&&e.channelName===n&&e.eventName===r}))}},{key:"_registerOutConnections",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.entries(n).forEach(function(n){var r=Lt(n,2),i=r[0],o=r[1];return t.addPublication(i,e,o.bind,o)})}},{key:"addPublication",value:function(e,t,n,r){if(this.isBridgeChannel(e))console.warn("Forbidden operation. You are trying to write to a private channel (".concat(e,")."));else{var i=this.getSubscriptor(t),o=this._hasPublisher(i,t,e,n);if(!o){var a=this.manager.get(e);i.publish(this.wrapEvent(t,n,a,r))}}}},{key:"publish",value:function(e,t){if(this.isBridgeChannel(e))console.warn("Forbidden operation. You are trying to write to a private channel (".concat(e,")."));else{var n=this.manager.get(e),r="".concat(e,"-publish");n.next(new CustomEvent(r,{detail:t}))}}},{key:"unsubscribe",value:function(e,t){if(e&&t){var n=Array.isArray(e)?e:[e],r=this.subscriptors.get(t),i=function(e){return n.includes(e.channel.name)},o=function(e){return!(i(e)&&!e.subscription.unsubscribe())};r.subscriptions=r.subscriptions.filter(o)}}},{key:"unregisterComponent",value:function(e,t){if(e){var n=this.subscriptors.get(e);n&&(n.unsubscribe(t),this.subscriptors.delete(e))}}},{key:"unregisterAllSubscriptors",value:function(e){this.subscriptors.forEach(function(t){t.subscriptions.forEach(function(t){return t.subscription.unsubscribe(e)})}),this.subscriptors=new Map}},{key:"wrapEvent",value:function(e,t,n,r){var i=this,o=Ha.AFTER_PUBLISH,a=Ha.NAV_REQUEST,u=Ha.ROUTER_BACKSTEP,s=Ha.TRACK_EVENT,c=Ha.LOG_EVENT,l=function(e){return i.bridge.featureFlagCollection.value(Rt({defaultValue:!0},e))},f=Ee(e,t);Ba.has(e)&&(f=f.pipe(Pe(function(){return Ba.get(e)})));var p=f.subscribe(function(t){var f=i.adapterResolver.getNodeAdapter(e);if(f.isEventAtTarget(t)){if(n.next(t),to.emit(o,t),r&&r.link&&l(r.link.featureFlag)){var p=Rt({},r.link);r.link.page&&r.link.page.hasOwnProperty("bind")&&(p.page=t.detail[r.link.page.bind]),r.link.cleanUntil&&r.link.cleanUntil.hasOwnProperty("bind")&&(p.cleanUntil=t.detail[r.link.cleanUntil.bind]),to.emit(a,{event:t,detail:p})}r&&r.backStep&&l(r.backStep.featureFlag)&&to.emit(u,{event:t,detail:{}}),r&&r.analytics&&l(r.analytics.featureFlag)&&to.emit(s,{event:t,detail:r.analytics}),r&&r.log&&l(r.log.featureFlag)&&to.emit(c,{event:t,detail:r.log}),i.wrapEventHandler&&i.wrapEventHandler(t,r,n)}});return p.node=e,p.eventName=t,p.channelName=n.name,p.options=r,p}},{key:"createEvent",value:function(e,t){var n=new Event(e);return n.detail={value:t},n}},{key:"isActiveBridgeChannel",value:function(e){return this.isBridgeChannel(e)&&this.manager.getUnsafe(e)}},{key:"isBridgeChannel",value:function(e){return this.bridgeChannelsPrefix.test(e)}},{key:"hasSubscriptions",value:function(e,t){return Boolean(e.subscriptions.find(function(e){return e.channel.name===t}))}}]),e}(),za=function(){function e(t,n){var r=this;Wt(this,e),this.name="",this.params={},this.patterns=[""],this.redirectPage=null,this.isAccessible=!0,this.isWildcarded=!1,this.name=t,this.patterns="string"==typeof n?[n]:n,this.regexps=this.patterns.map(function(e){return r._getRegExp(e)})}return Kt(e,[{key:"_getRegExp",value:function(t){var n=t,r="/*",i="$",o=n.indexOf("*");o>=0&&(this.isWildcarded=!0,n=n.substring(0,o),r="/+",i="");var a=n.replace(e.PARAM,"([^/]+)").replace(e.TRAILING_SLASHES,r);return new RegExp("^"+a+i)}},{key:"path",value:function t(n){n=n||{},this.params={};for(var r,t=this.patterns[0];null!==(r=e.PARAM.exec(this.patterns[0]));)t=t.replace(r[0],n[r[1]]),this.params[r[1]]=n[r[1]];var i=[];for(var o in n)this.params.hasOwnProperty(o)||i.push(o+"="+encodeURIComponent(n[o]));return i.length&&(t+="?"+i.join("&")),t}},{key:"matchPath",value:function(e){var t=this,n=null;return this.regexps.forEach(function(r,i){var o=e.match(r);o&&(n={index:i,regex:t.regexps[i],pattern:t.patterns[i],parts:o})}),n}},{key:"parsePath",value:function(t){var n=this.matchPath(t);if(this.params={},this.subroute=void 0,n){var r,i=1;for(n.parts[0]!==n.parts.input&&(this.subroute=n.parts.input.substring(n.parts[0].length-1));null!==(r=e.PARAM.exec(n.pattern));)this.params[r[1]]=this._parseParam(n.parts[i]),i++}}},{key:"parseQuery",value:function(e){this.query=e;for(var t in this.query)this.query.hasOwnProperty(t)&&(this.params[t]=this.query[t])}},{key:"is404",value:function(){return this.name===e._404_PAGE_NAME}},{key:"_isNumber",value:function(e){return parseInt(e)+""===e||parseFloat(e)+""===e}},{key:"_parseParam",value:function(e){return this._isNumber(e)?+e:e}},{key:"handler",value:function(){}}]),e}();za.PARAM=/(?::([^/]+))/g,za.TRAILING_SLASHES=/\/*$/,za._404_PAGE_NAME="404";var qa,Wa,Ya,Ka,Ja=function(e){return function(t){return e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,pe),t}},Qa=$t(),$a=function(e){return function(t){for(var n=e[Qa]();;){var r=void 0;try{r=n.next()}catch(e){return t.error(e),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add(function(){n.return&&n.return()}),t}},Xa=function(e){return function(t){var n=e[$o]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}},Za=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e},eu=function(e){if(e&&"function"==typeof e[$o])return Xa(e);if(Za(e))return ma(e);if(Xt(e))return Ja(e);if(e&&"function"==typeof e[Qa])return $a(e);var t=he(e)?"an invalid object":"'"+e+"'",n="You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";throw new TypeError(n)},tu=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,n}return le(t,e),t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(Jo),nu=(function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i}return le(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(Jo),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return le(t,e),t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(Jo)),ru=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return le(t,e),t.prototype.notifyNext=function(e,t,n,r){this.destination.next(t)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(Jo),function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new iu(e,this.project,this.concurrent))},e}()),iu=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return le(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t)},t.prototype._innerSub=function(e){var t=new tu(this),n=this.destination;n.add(t);var r=un(e,t);r!==t&&n.add(r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(nu),ou=function(){function e(e,t){this.compare=e,this.keySelector=t}return e.prototype.call=function(e,t){return t.subscribe(new au(e,this.compare,this.keySelector))},e}(),au=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.keySelector=r,i.hasKey=!1,"function"==typeof n&&(i.compare=n),i}return le(t,e),t.prototype.compare=function(e,t){return e===t},t.prototype._next=function(e){var t;try{var n=this.keySelector;t=n?n(e):e}catch(e){return this.destination.error(e)}var r=!1;if(this.hasKey)try{var i=this.compare;r=i(this.key,t)}catch(e){return this.destination.error(e)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))},t}(Jo),uu=function(){function e(){dn(this,e),this.navStack=[],this.skipNav={}}return mn(e,[{key:"length",get:function(){return this.navStack.length}},{key:"addSkipNavigation",value:function(e){e.skipHistory!==!0&&e.skipHistory!==!1||(this.skipNav["".concat(e.from,":").concat(e.to)]=e.skipHistory)}},{key:"_reverseNavigation",value:function(e){return{from:e.to,to:e.from}}},{key:"isSkipNavigation",value:function(e){return this.skipNav["".concat(e.from,":").concat(e.to)]===!0}},{key:"lastNavigation",value:function(){var e,t,n=this.navStack.length;return 1===n?t=this.navStack[0]:n>1&&(t=this.navStack[n-1],e=this.navStack[n-2]),this.createNavigation(e,t)}},{key:"createRoute",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{page:e,params:t}}},{key:"createNavigation",value:function(e,t){return{from:e?e.page:void 0,to:t?t.page:void 0}}},{key:"push",value:function(e){var t;this.top()&&(null===(t=this.top())||void 0===t?void 0:t.page)===e.page||this.navStack.push(e)}},{key:"replace",value:function(e){var t;this.top()&&(null===(t=this.top())||void 0===t?void 0:t.page)===e.page||(this.navStack[this.navStack.length-1]=e)}},{key:"pop",value:function(){return this.navStack.pop()}},{key:"top",value:function(){return this.navStack.length>0?this.navStack[this.navStack.length-1]:void 0}},{key:"isBackwardNavigation",value:function(e){var t=this.lastNavigation();return t&&e.from===t.to&&e.to===t.from}},{key:"update",value:function(e,t){var n=this.createNavigation(e,t);if(this.isBackwardNavigation(n)){for(;this.isSkipNavigation(this._reverseNavigation(this.lastNavigation()));)this.pop();this.pop()}else this.push(t);return this.top()}},{key:"clear",value:function(){this.navStack=[]}},{key:"replaceRoute",value:function(e){this.navStack.length>0?this.navStack[this.navStack.length-1]=e:this.push(e)}},{key:"clearUntil",value:function(e){if(this.navStack.find(function(t){return t.page===e})){var t=null;do t=this.navStack.pop();while(t&&t.page!=e)}}}]),e}(),su=Yo.EMPTY,cu=wo.externalEventsCodes,lu=null,fu=!1,pu={},hu=function(e){function t(){var e;return In(this,t),e=n.call(this),e._currentSubscription=su,e}Bn(t,e);var n=Gn(t);return Ln(t,[{key:"add",value:function(e){this.closed||("function"==typeof e&&(e=new Yo(e)),this._currentSubscription&&(this.remove(this._currentSubscription),this._currentSubscription.unsubscribe(),this._currentSubscription=null),Dn(qn(t.prototype),"add",this).call(this,this._currentSubscription=e))}}]),t}(Yo),vu=function(){function e(){var t=this;In(this,e),this.interceptorContext={};var n=cu.TEMPLATE_TRANSITION_END;return lu||(lu=this),this.navigationStack=this._createNavigationStack(),to.on(n,function(){t.isNavigationInProgress=!1}),lu}return Ln(e,[{key:"_createNavigationStack",value:function(){return new uu}},{key:"useHistory",get:function(){return fu},set:function(t){e.SUPPORTS_HISTORY_API&&(fu=t)}},{key:"routes",get:function(){return pu},set:function(e){pu=e}},{key:"currentRoute",get:function(){return Wa},set:function(e){Wa=e}},{key:"channelManager",get:function(){return Ka},set:function(e){Ka=e}},{key:"handler",value:function(e){}},{key:"addRoute",value:function(e,t){return this.routes[e]=new za(e,t),this.routes[e]}},{key:"addRoutes",value:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=this.addRoute(n,e[n]));return t}},{key:"addSkipNavigations",value:function(e){for(var t=0;t<e.length;t++)this.navigationStack.addSkipNavigation(e[t])}},{key:"_getHashPath",value:function(){return location.hash.replace(e.HASH_PREFIX,"/").replace(e.EMPTY,"/")}},{key:"_observeHashChange",value:function(){return Ee(window,"hashchange").pipe(we(this._getHashPath),hn(this._getHashPath()))}},{key:"_getURLPath",value:function(){return location.pathname.replace(e.PATH_PREFIX,"/")}},{key:"_observeStateChange",value:function(){return ln(Ee(window,"popstate"),Ee(window,"pushstate")).pipe(we(this._getURLPath),hn(this._getURLPath()))}},{key:"matchRoute",value:function(e){var t,n=e.split("?"),r=Pn(n,2),i=r[0],o=r[1];o=this._parseQuery(o);for(var a in this.routes)if(this.routes.hasOwnProperty(a)&&(t=this.routes[a],(!t.is404()||t.isAccessible)&&t.matchPath(i)))return t.isWildcarded?t.parsePath(e):(t.parsePath(i),t.parseQuery(o)),t}},{key:"_parseQuery",value:function(e){var t={};if(e){var n=e.split("&");if(n){var r,i,o,a=n.length;for(o=0;o<a;o++){var u=n[o].split("="),s=Pn(u,2);r=s[0],i=s[1],t[r]=decodeURIComponent(i)}}}return t}},{key:"_setup404",value:function(){var e=this.routes[za._404_PAGE_NAME];if(e&&1===e.patterns.length){var t=this.getRouteWithPattern(e.patterns[0]);e.redirectPage=t?t.name:e.name,e.isAccessible=!t}return e}},{key:"getRouteWithPattern",value:function(e){for(var t in this.routes)if(this.routes.hasOwnProperty(t)){var n=this.routes[t];if(!n.is404()&&n.patterns.includes(e))return n}return null}},{key:"interceptor",value:function(e,t){return{intercept:!1}}},{key:"intercept",value:function(e,t){var n={from:{page:e.page,params:e.params},to:{page:t.name,path:t.patterns[0],params:t.params}};return Cn(Cn({},this.interceptor(n,this.interceptorContext)),n)}},{key:"updateInterceptorContext",value:function(e){this.interceptorContext=_n({},this.interceptorContext,e)}},{key:"setInterceptorContext",value:function(e){this.interceptorContext=_n({},e)}},{key:"getInterceptorContext",value:function(){return _n({},this.interceptorContext)}},{key:"start",value:function(){var e=this;if(!qa){var t=new hu;Ya=this._setup404();var n=this.useHistory?this._observeStateChange():this._observeHashChange(),r=n.pipe(vn(),we(this.matchRoute.bind(this)),Pe(function(t){return!t||t.name!==e.cancelledNavigation||(e.cancelledNavigation=void 0,e.isNavigationInProgress=!1,e.currentRoute.name!==e.navigationStack.top().page&&e.navigationStack.push({page:e.currentRoute.name,params:e.currentRoute.params}),!1)}));r.forEach(function(n){if(e.hashIsDirty)e.hashIsDirty=!1;else if(n){var r=e.currentRoute?e.currentRoute.name:void 0,i=e.currentRoute?e.currentRoute.params:void 0,o=e.navigationStack.createRoute(r,i),a=e.navigationStack.createRoute(n.name,n.params),u=e.intercept(o,n);if(u.intercept)return e.isNavigationInProgress=!1,u.redirect?e.goReplacing(u.redirect.page,u.redirect.params):(e.go(r,i,!1),e.cancelledNavigation=r),void(e.channelManager&&setTimeout(function(){return e.channelManager.publishInterceptedNavigation(u)},0));var s=e.navigationStack.update(o,a).page;if(s!==a.page)return void e.go(s,void 0,!1);Wa=n;var c=new Yo(function(){return e.currentRoute});t.add(c),e.currentRoute.handler(),e.handler(e.currentRoute)}else Ya&&Ya.redirectPage&&e.goReplacing(Ya.redirectPage)}),qa=new Yo(r,t)}return qa}},{key:"stop",value:function(){qa&&(qa.unsubscribe(),qa=null),this.isNavigationInProgress=!1,this.hashIsDirty=!1}},{key:"destroy",value:function(){this.stop(),this.routes={}}},{key:"getPath",value:function(e,t){var n=this.routes[e];if(n){var r,i=n.path(t),o=i.indexOf("?");
if(o>-1){var a=i.substring(0,o),u=i.substring(o);r=a.replace(/\*/g,"")+u}else r=i.replace(/\*/g,"");return r}console.error("Wrong route name: %s, valid route names: %s",e,Object.keys(this.routes).join(", "))}},{key:"newNavigation",value:function(e){return{from:this.currentRoute?this.currentRoute.name:void 0,to:e}}},{key:"reverseNavigation",value:function(e){return{from:e.to,to:e.from}}},{key:"go",value:function(t,n,r,i){if(!this.isNavigationInProgress){if(void 0!==i){var o=this.newNavigation(t),a=this.reverseNavigation(o);a.skipHistory=i,this.navigationStack.addSkipNavigation(a)}var u=t.replace(e.LTRIM_SLASH,""),s=this.getPath(u,n);s!==this._getHashPath()&&(this.isNavigationInProgress=!0,this.updatePathInBrowser(s,r))}}},{key:"back",value:function(){var e={};if(this.navigationStack.length>1){for(var t=this.navigationStack.pop(),n=t,r=this.getLastRoute();this.navigationStack.isSkipNavigation({from:n.page,to:r.page})&&this.navigationStack.length>1;)n=this.navigationStack.pop(),this.navigationStack.length>0&&(r=this.getLastRoute());var i=r.page,o=r.params;e.from=t,e.to=r,this.go(i,o)}else e.from=this.getLastRoute(),e.to=this.getLastRoute();return e}},{key:"updatePathInBrowser",value:function(e,t){this.useHistory?t?this.historyReplaceState(e):this.historyPushState(e):t?this.locationReplace(e):this.locationHash(e)}},{key:"updateSubrouteInBrowser",value:function(e){var t=this.currentRoute,n=this.getPath(t.name,t.params);e&&(n.endsWith("/")&&(n=n.substring(0,n.length-1)),n+=e),this.updatePathInBrowser(n,!0),this.hashIsDirty=!0}},{key:"goReplacing",value:function(e,t){this.go(e,t,!0)}},{key:"historyReplaceState",value:function(e){history.replaceState(null,null,e)}},{key:"historyPushState",value:function(e){history.pushState(null,null,e)}},{key:"locationReplace",value:function(e){location.replace("#!"+e)}},{key:"locationHash",value:function(e){location.hash="#!"+e}},{key:"getLastRoute",value:function(){return this.navigationStack.top()}},{key:"init",value:function(){this._clearStack()}},{key:"_clearStack",value:function(){this.navigationStack.clear()}},{key:"clearStackUntil",value:function(e){this.navigationStack.clearUntil(e)}}]),e}();vu.SUPPORTS_HISTORY_API=window.history&&"pushState"in window.history,vu.PARAM=/(?::([^/]+))/g,vu.LTRIM_SLASH=/^\/(\b)/,vu.EMPTY=/^$/,vu.HASH_PREFIX=/^#!?\/*/,vu.PATH_PREFIX=/^\/*/,vu.isNavigationInProgress=!1,vu.hashIsDirty=!1;var yu=wo.externalEventsCodes,du=function(e,t){return function(){if(--e<1)return t()}},gu=function(){function e(){Yn(this,e)}return Jn(e,[{key:"_importElement",value:function(e,t,n){var r=document.createElement("link");r.rel="import",r.href=e+t,r.onload=n,r.onerror=n,r.setAttribute("async",""),document.head.appendChild(r)}},{key:"_importElementPromise",value:function(e,t){var n=this;return new Promise(function(r){n._importElement(e,t,r)})}},{key:"loadBundleForTemplate",value:function(e,t,n){var r=this;return new Promise(function(i){var o=function(){n&&n.call(r),i()};r._importElement(e,t+".html",o)})}},{key:"loadComponent",value:function(e,t,n){var r=this,i=yu.BEFORE_IMPORT,o=yu.AFTER_IMPORT;return new Promise(function(a){var u=function(){n&&n.call(r),a()},s=e;if(Array.isArray(s)||(s=[e]),0===s.length)return void u();to.emit(i);for(var c=du(s.length,function(){to.emit(o),u()}),l=0;l<s.length;l++){var f=s[l];r._importElement(t,f.spec.path,c)}})}},{key:"loadComponentByPriority",value:function(e,t,n){var r=this,i=yu.BEFORE_IMPORT,o=yu.AFTER_IMPORT,a=e;if(Array.isArray(a)||(a=[e]),0===a.length)return void(n&&n.call(this));var u=this._createPriorityLists(a);to.emit(i),this._chainElementLoading(t,u,0).then(function(){to.emit(o),n&&n.call(r)})}},{key:"_createSortedArratByPriorityAndUniqueElements",value:function(e){return e.sort(function(e,t){var n=e.priority||1e3,r=t.priority||1e3;return n===r?e.spec.path<=t.spec.path?-1:1:n-r}),e.filter(function(e,t,n){return 0===t||e.spec.path!==n[t-1].spec.path})}},{key:"_createPriorityLists",value:function(e){for(var t=this._createSortedArratByPriorityAndUniqueElements(e),n=t[0].priority,r=[[]],i=0,o=0;o<t.length;o++){var a=t[o];a.priority===n?r[i].push(a):(n=a.priority,r.push([]),i=r.length-1,r[i].push(a))}return r}},{key:"_chainElementLoading",value:function(e,t,n){var r=this,i=[];if(t.length===n)return Promise.resolve();for(var o=0;o<t[n].length;o++)i.push(this._importElementPromise(e,t[n][o].spec.path));var a=n+1;return Promise.all(i).then(function(){return r._chainElementLoading(e,t,a)})}}]),e}(),mu=gu,bu=function(e){function t(e){var r;return Zn(this,t),r=n.call(this),r.spec=e,r.spec.node=r.spec.node?r.spec.node:r.createElement(r.spec.tagName),r}ar(t,e);var n=sr(t);return tr(t,[{key:"setProps",value:function(){var e=this.spec;if(e.connections&&e.connections.ignoreAttr)for(var n=0;n<e.connections.ignoreAttr.length;n++){var r=e.connections.ignoreAttr[n];delete e.properties[r]}ir(pr(t.prototype),"setProps",this).call(this,this.node,e.properties,e.render),this.setAttrs()}},{key:"setAttrs",value:function(){ir(pr(t.prototype),"setAttrs",this).call(this,this.node,this.spec.attributes)}},{key:"type",get:function(){return this.spec.type},set:function(e){this.spec.type=e}},{key:"zone",get:function(){return this.spec.zone},set:function(e){this.spec.zone=e}},{key:"fixed",get:function(){return this.spec.fixed},set:function(e){this.spec.fixed=e}},{key:"container",get:function(){return this.spec.container},set:function(e){this.spec.container=e}},{key:"priority",get:function(){return this.spec.priority},set:function(e){this.spec.priority=e}},{key:"node",get:function(){return this.spec.node},set:function(e){this.spec.node=e}},{key:"connections",get:function(){return this.spec.connections},set:function(e){this.spec.connections=e}}]),t}(Io),wu=function(e){function t(){var e;vr(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return _r(e,(e=n.call.apply(n,[this].concat(i)),e.children=[],e.fixedChildren=[],e.type="TEMPLATE",Sr(e)))}br(t,e);var n=Er(t);return dr(t,[{key:"getZone",value:function(e){var t,n=this.node;return t=e?n.$&&n.$[e]?n.$[e]:n.querySelector("#"+e):n,t||n}},{key:"cache",value:function(){this._setAttribute("state","cached")}},{key:"activate",value:function(){this._setAttribute("state","active")}},{key:"deactivate",value:function(){this._setAttribute("state","inactive")}},{key:"native",value:function(){this._setAttribute("state","native")}},{key:"resetNextNavigation",value:function(){this._getTemplate(this.node)._nextNavigation=void 0}},{key:"_setAttribute",value:function(e,t){var n=this._getTemplate(this.node);try{n.setAttribute(e,t)}catch(e){throw new Error("".concat(this.node.tagName.toLowerCase()," has no valid template. Template was ").concat(n))}}},{key:"_getAttribute",value:function(e){var t=this._getTemplate(this.node),n="";try{n=t.getAttribute(e)}catch(e){throw new Error("".concat(this.node.tagName.toLowerCase()," has no valid template. Template was ").concat(t))}return n}},{key:"_getTemplate",value:function(e){var t=e.tagName,n=t.toLowerCase().endsWith("-page");return n?this._getCellsTemplateFromPage(e):e}},{key:"_getCellsTemplateFromPage",value:function(e){var t=e.shadowRoot&&e.shadowRoot.childNodes?e.shadowRoot.childNodes:e.children;return Array.from(t).find(function(e){return e&&e.tagName&&(e.tagName.toLowerCase().indexOf("cells-template")!==-1||"template"===e.getAttribute("data-cells-type"))})}},{key:"_getContainerAndSlot",value:function(e){var t=e,n=e;if(e){var r=e.split(".");2===r.length&&(t=r[0],n=r[1])}return{container:t,slot:n}}},{key:"append",value:function(e){if(e){void 0===e.length&&(e=[e]);var t=e.filter(function(e){return e.fixed!==!0}),n=e.filter(function(e){return e.fixed===!0});this.fixedChildren=this.fixedChildren.concat(n),this.children=this.children.concat(e);for(var r=[],i=0;i<t.length;i++){var o=t[i],a=this._getContainerAndSlot(o.zone),u=a.container,s=a.slot;o.node.setAttribute("data-select",s),o.node.setAttribute("slot",s),"object"!==hr(r[u])&&(r[u]=this.getZone(u)),r[u].appendChild(o.node)}}}},{key:"config",value:function(e){var t=e.name,n=e.template,r=n.id,i=n.name;this.name=t,this.node.id=r,this.node.name=i,this.setProps(),this.setAttrs()}}]),t}(bu),Eu=wo.bindingCodes,_u=wo.externalEventsCodes,Su=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Or(this,e),this.cache={},this.templates={},this.selected="",this.locations=[],this.size=0,this.fixedTemplates=["__cross"];var n=t.persistentPages||[];this.viewLimit=t.viewLimit&&t.viewLimit>=1?t.viewLimit:3,this.fixedTemplates=this.fixedTemplates.concat(n),this.maxSize=this.viewLimit+this.fixedTemplates.length}return xr(e,[{key:"createTemplate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.get(e);return r||(r=this._createCellsTemplate(e,t),this._storeTemplate(e,r,n)),r}},{key:"_createCellsTemplate",value:function(e,t){var n=new wu(t),r=this._createCellsTemplateConfig(e);return n.config(r),n}},{key:"_createCellsTemplateConfig",value:function(e){return{name:e,template:{id:this.computeTemplateId(e),name:e}}}},{key:"_storeTemplate",value:function(e,t,n){var r=t.node;if(n){var i=this.fixedTemplates.indexOf(e)===-1;if(i){this.fixedTemplates.push(e),this.maxSize++;var o=this.maxSize===this.fixedTemplates.length;o&&(this.maxSize+=this.viewLimit)}}if(this.size>=this.maxSize){var a=this._getOlderRemovableTemplate();a?this.removeTemplate(a):console.warn("No space left in template cache for template ",e)}this.locations.push(e),this.cache[e]=t,this.templates[e]=r,this.size++}},{key:"_getOlderRemovableTemplate",value:function(){for(var e,t=!1,n=0;!t&&n<this.locations.length;n++){var r=this.fixedTemplates.indexOf(this.locations[n])==-1;r&&(e=this.locations[n],t=!0)}return e}},{key:"get",value:function(e){return this.cache[e]}},{key:"getNode",value:function(e){return this.templates[e]}},{key:"parseTemplateName",value:function(e){return e}},{key:"computeTemplateId",value:function(e){return"cells-template-"+e.replace(/\./g,"-")}},{key:"select",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"always",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=_u.TEMPLATE_TRANSITION_END,u=Eu.CURRENTVIEW,s=Eu.UI,c=this.get(e),l=this.cache;for(var f in l)l.hasOwnProperty(f)&&(f===this.selected?(t=f,l[f].deactivate()):e!==f&&l[f].cache());this.selected=e,c.activate(),n&&r!==u&&r!==s&&n.updateBridgeChannels(t,e,i,o),to.emit(a,c)}},{key:"removeTemplate",value:function(e){if(this.templates[e]){var t=document.querySelector("#"+this.templates[e].id),n=this.locations.indexOf(e);this.locations.splice(n,1),t.parentNode.removeChild(t),delete this.templates[e],delete this.cache[e],this.size--}}},{key:"removeTemplates",value:function(e,t){for(var n in this.templates)this.templates.hasOwnProperty(n)&&n!==e&&n!==t&&this.removeTemplate(n)}},{key:"removeTemplateChildrens",value:function(e){var t=this.templates[e];if(t)for(;t.firstChild;)t.removeChild(t.firstChild)}}]),e}(),Cu=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),ku=Cu,Pu=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}(),Ou=Pu,Tu=function(){function e(e){if(this.total=e,this.total<0)throw new Ou}return e.prototype.call=function(e,t){return t.subscribe(new xu(e,this.total))},e}(),xu=function(e){function t(t,n){var r=e.call(this,t)||this;return r.total=n,r.count=0,r}return le(t,e),t.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},t}(Jo),Au=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new ju(e,this.defaultValue))},e}(),ju=function(e){function t(t,n){var r=e.call(this,t)||this;return r.defaultValue=n,r.isEmpty=!0,r}return le(t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(Jo),Iu=function(){function e(e){this.errorFactory=e}return e.prototype.call=function(e,t){return t.subscribe(new Ru(e,this.errorFactory))},e}(),Ru=function(e){function t(t,n){var r=e.call(this,t)||this;return r.errorFactory=n,r.hasValue=!1,r}return le(t,e),t.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},t.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)},t}(Jo),Lu=function(){function e(t){Fr(this,e),this.componentConnector=t.ComponentConnector,this.privateChannels=new Set}return Ur(e,[{key:"getAppContextChannelName",value:function(){return"__bridge_app"}},{key:"getCancelledBackNavigationChannelName",value:function(){return"__bridge_cancelled_back_navigation"}},{key:"getInterceptedNavigationChannelName",value:function(){return"__bridge_intercepted_navigation"}},{key:"getPrivateChannelPrefix",value:function(){return"__bridge_page_"}},{key:"getEventChannelPrefix",value:function(){return"__bridge_evt_"}},{key:"getBridgeChannelPrefix",value:function(){return"__bridge_ch_"}},{key:"getPostMessageChannelPrefix",value:function(){return"__bridge_post_message_"}},{key:"getBridgeChannel",value:function(e){return this.componentConnector.manager.get(this.getBridgeChannelPrefix()+e)}},{key:"getIdleCallbackChannel",value:function(){var e=Xo.create(function(e){return e.next(!0)});return e.pipe(Mr())}},{key:"getAppContextChannel",value:function(){return this.componentConnector.manager.get(this.getAppContextChannelName())}},{key:"getCancelledBackNavigationChannel",value:function(){return this.componentConnector.manager.get(this.getCancelledBackNavigationChannelName())}},{key:"getInterceptedNavigationChannel",value:function(){return this.componentConnector.manager.get(this.getInterceptedNavigationChannelName())}},{key:"getPrivate",value:function(e){var t=this.getPrivateChannelPrefix()+e,n=this.componentConnector.manager.get(t);return this.privateChannels.add(t),n}},{key:"getPostMessageChannel",value:function(e){var t=this.getPostMessageChannelPrefix()+e;return this.componentConnector.manager.get(t)}},{key:"initAppContextChannel",value:function(){this.getAppContextChannel()}},{key:"initCancelledBackNavigationChannel",value:function(){this.getCancelledBackNavigationChannel()}},{key:"initPrivateChannel",value:function(e,t){this.publishPrivatePageStatus(t,!0),e&&this.publishPrivatePageStatus(e,!1)}},{key:"publishPrivatePageStatus",value:function(e,t){var n=this.getPrivate(e),r=this.componentConnector.createEvent("page-load",t);n.next(r)}},{key:"updateAppContext",value:function(e,t,n,r){var i=this.componentConnector.createEvent("app-context",{currentPage:t,fromPage:e,interceptorContext:n,currentRoute:r});this.getAppContextChannel().next(i)}},{key:"updateBridgeChannels",value:function(e,t,n,r){this.updateAppContext(e,t,n,r),this.initPrivateChannel(e,t)}},{key:"publishCancelledBackNavigation",value:function(e){var t=this.componentConnector.createEvent("back-nav-cancelled",e);this.getCancelledBackNavigationChannel().next(t)}},{key:"publishInterceptedNavigation",value:function(e){var t=this.componentConnector.createEvent("intercepted-navigation",e);this.getInterceptedNavigationChannel().next(t)}},{key:"isPrivateChannel",value:function(e){return 0===e.indexOf(this.getPrivateChannelPrefix())}},{key:"isActivePrivateChannel",value:function(e){return this.privateChannels.has(e)}},{key:"resetBridgeChannels",value:function(e,t){var n=this,r=Object.keys(this.componentConnector.manager.channels);r.forEach(function(e){var t=n.componentConnector.manager.get(e);t.clean(),t.unsubscribeAll()}),this.componentConnector.unregisterComponent(e,t),this.componentConnector.unregisterAllSubscriptors(t),this.componentConnector.manager.cleanAllChannels()}},{key:"getCCSubscriptions",value:function(e,t){var n=Array.from(this.componentConnector.subscriptors.values()).filter(function(n){var r,i;return(null===(r=n.node.parentNode)||void 0===r?void 0:r.id)===e||(null===(i=n.node.parentNode)||void 0===i?void 0:i.id)===t||n.node.id===t}),r=n.map(function(e){var t;return null===(t=e.publications._subscriptions)||void 0===t?void 0:t.map(function(t){return{channel:t.channelName,bind:t.eventName,component:e.node,options:t.options}})}).filter(function(e){return void 0!==e}).reduce(function(e,t){return e.concat(t)},[]),i=n.map(function(e){var t;return null===(t=e.subscriptions)||void 0===t?void 0:t.map(function(t){return{channel:t.channel.name,bind:t.bind,component:e.node}})}).filter(function(e){return void 0!==e}).reduce(function(e,t){return e.concat(t)},[]);return{inConnections:i,outConnections:r}}},{key:"initEventChannels",value:function(e,t){var n=this;t.forEach(function(t){var r=n.getEventChannelPrefix(),i=r+t,o=n.componentConnector.manager.get(i),a=Ee(e,t);a.subscribe(function(e){return o.next(e)})})}},{key:"subscribeToEvent",value:function(e,t,n){var r=this.getEventChannelPrefix(),i=r+t,o=this.componentConnector.getSubscriptor(e),a=this.componentConnector.manager.get(i);n.node=e,o.subscribe(a,n)}}]),e}(),Nu=wo.externalEventsCodes,Mu=function(){function e(t){zr(this,e),this.bridge=t,this.PageManager=t.PageManager,this.ChannelManager=t.BridgeChannelManager,this.TemplateManager=t.TemplateManager}return Wr(e,[{key:"subscribeAll",value:function(){var e=this;this.ChannelManager.getBridgeChannel("config").subscribe(function(t){return e._configSubscriptor(t)}),this.ChannelManager.getBridgeChannel("locales").subscribe(function(t){return e._localesSubscriptor(t)}),this.ChannelManager.getBridgeChannel("logout").subscribe(function(t){return e._logoutSubscriptor(t)}),this.ChannelManager.getBridgeChannel("interceptor_context").subscribe(function(t){return e._appContextSubscriptor(t)})}},{key:"updateProperty",value:function(e,t){this.isAllowedProperty(e)&&(this.bridge[e]=t,window.AppConfig&&(window.AppConfig[e]=t))}},{key:"isAllowedProperty",value:function(e){return"function"!=typeof this.bridge[e]}},{key:"_configSubscriptor",value:function(e){var t=this,n=Nu.TEMPLATE_REGISTERED,r=this.TemplateManager.selected;if(e.detail){for(var i in e.detail)e.detail.hasOwnProperty(i)&&this.updateProperty(i,e.detail[i]);(e.detail.app||e.detail.pagesPath)&&(this.PageManager.clear(),this.TemplateManager.removeTemplates(r,this.bridge.crossContainerId),to.once(n,function(){return t.TemplateManager.removeTemplate(r)}))}}},{key:"_localesSubscriptor",value:function(e){window.I18nMsg&&e.detail&&e.detail.lang&&(window.I18nMsg.lang=e.detail.lang)}},{key:"_logoutSubscriptor",value:function(){this.bridge.logout()}},{key:"_appContextSubscriptor",value:function(e){var t=e.detail;this.bridge.setInterceptorContext(t)}}]),e}(),Du=function(){function e(t,n){Qr(this,e),this.componentConnector=t,this.composerEngine=n,this.segments=[],this.customGroups=[],this.normalizedCustomGroups=[]}return Xr(e,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.initialParams=t,this.addParams(this.initialParams),this.componentConnector.get(this.getComposerEngineChannelName()).subscribe(function(t){return e.handleFeatureFlags(t)})}},{key:"getComposerEngineChannelName",value:function(){return"__composer_engine"}},{key:"handleFeatureFlags",value:function(e){var t=e.detail;this.addParams(t)}},{key:"addParams",value:function(e){this.addSegments(e.segments),this.addCustomGroups(e.customGroups)}},{key:"addSegments",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.filter(function(t){return!e.segments.includes(t)}).forEach(function(t){return e.segments.push(t)})}},{key:"addCustomGroups",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];t.forEach(function(t){var n=e.customGroups.find(function(e){return e.name===t.name});n?n.isConstant||(n.value=t.value):e.customGroups.push(t)}),this.normalizedCustomGroups=this.normalizeCustomGroups(this.customGroups)}},{key:"normalizeCustomGroups",value:function(e){var t=this;return e.map(function(e){return t.composerEngine.customGroup(e.name,JSON.stringify(e.value))})}},{key:"getPage",value:function(e){return this.composerEngine.getPageForAll(e,this.segments,this.normalizedCustomGroups)}},{key:"reset",value:function(){this.segments=[],this.customGroups=[],this.init(this.initialParams)}}]),e}(),Fu=n(4),Bu=n.n(Fu),Uu=n(1),Gu=n.n(Uu),Hu=Gu.a.get,Vu=Gu.a.set,zu=wo.monitoring.SEMAAS,qu=zu.mrId,Wu=zu.nameSpace,Yu=zu.identifier,Ku=zu.consumerId,Ju=zu.policy,Qu=(zu.tsecStorageKey,wo.externalEventsCodes),$u=Qu.PAGE_READY,Xu=Qu.PARSE_ROUTE,Zu=Qu.AFTER_PUBLISH,es=Qu.NAV_REQUEST,ts=Qu.BEFORE_SET_ATTR_TO_NODE,ns=Qu.AFTER_SET_ATTR_TO_NODE,rs=Qu.BEFORE_CREATE_NODE,is=Qu.AFTER_CREATE_NODE,os=Qu.BEFORE_IMPORT,as=Qu.AFTER_IMPORT,us=Qu.PAGE_REQUEST,ss=Qu.PAGE_RESPONSE,cs=Qu.DATA_LOAD,ls=Qu.TEMPLATE_TRANSITION_END,fs=Qu.TRACK_EVENT,ps=Qu.TEMPLATE_REGISTERED,hs=Qu.ROUTER_BACKSTEP,vs=Qu.LOG_EVENT,ys=function(){function e(t){ai(this,e),this.bridge=null,this.application=null;var n=t.semaas,r=void 0===n?{}:n,i=t.logs;if(i){var o=!1,a=this.getApplicationConfiguration(r);if(this.application=this.initilizeSEMaaSAdapter(a),o){var u=this.getBridgeConfiguration(r);this.bridge=this.initilizeSEMaaSAdapter(u)}}}return si(e,[{key:"flush",value:function(){function e(){return t.apply(this,arguments)}var t=oi(ri().mark(function e(){return ri().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.application.flushAll());case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"getBridgeConfiguration",value:function(e){var t=e.tsec2JWTEndpoint,n=e.region,r=e.dnsTld,i=e.version;return{policy:Ju,mrId:qu,nameSpace:Wu,identifier:Yu,consumerId:Ku,tsec2JWTEndpoint:t,region:n,dnsTld:r,version:i}}},{key:"getApplicationConfiguration",value:function(e){var t=e.tsec2JWTEndpoint,n=e.policy,r=e.mrId,i=e.nameSpace,o=e.consumerId,a=e.region,u=e.dnsTld,s=e.version,c=e.logLevel,l=e.tsecStorageKey,f=void 0===l?"tsec":l;return{policy:n,mrId:r,nameSpace:i,identifier:"application",consumerId:o,tsec2JWTEndpoint:t,region:a,dnsTld:u,version:s,logLevel:c,tsecStorageKey:f}}},{key:"initilizeSEMaaSAdapter",value:function(e){return new Bu.a(e)}},{key:"logBridge",value:function(e){this.bridge.log(e)}},{key:"logApplication",value:function(e){this.application.log(e)}},{key:"ingest",value:function(e){this.application.ingest(e)}},{key:"createSpan",value:function(e){return this.application&&this.application.createSpan(e)}},{key:"createUUID",value:function(){return this.application&&this.application.createUUID()}},{key:"hasBridgeLoggingEnabled",value:function(){return!!this.bridge}},{key:"hasApplicationLoggingEnabled",value:function(){return!!this.application}},{key:"buildLog",value:function(e,t){var n=t.detail,r={message:"cells-bridge::".concat(e),properties:{}},i=ni({},n,r);switch(e){case $u:var o=t.page,a=t.components;i.properties={page:o,components:a};break;case Xu:var u=t.name,s=t.params,c=t.pattern;i.properties={route:u,params:s,pattern:c};break;case es:var l=t.event,f=t.detail,p=f.page,h=l.detail;i.properties={page:p,params:h};break;case us:var v=t.params,y=t.url;i.properties={params:v,url:y};break;case ss:i.properties=ni({},t);break;case vs:var d=t.detail,g=t.event,m=d.message,b=d.properties,w=g.detail;i.message=m,i.properties=this.unflattenData(b,w);break;case Zu:case ts:case ns:case rs:case is:case os:case as:case cs:case ls:case fs:case ps:case hs:}return i}},{key:"isBridgeLoggableEvent",value:function(e){var t=[$u,Xu,es,us,ss];return t.includes(e)}},{key:"unflattenData",value:function(e,t){var n={};return Object.keys(e).forEach(function(r){var i=e[r],o=null;if(i instanceof Object){var a=i.bind;o=Hu(t,a)}else o=i;Vu(n,r,o)}),n}}]),e}(),ds={extend:gi,defaultChangedCallback:di,BRIDGE_CHANNEL_KEY:Da},gs=bi,ms=function(){function e(t){_i(this,e),t.postMessageTargetOrigin?"*"===t.postMessageTargetOrigin?(this.enabled=!1,console.warn("For security reasons postMessageTargetOrigin can't be the wildcard '*'. See docs for more info. ")):(this.enabled=!0,this.postMessageTargetOrigin=t.postMessageTargetOrigin):this.enabled=!1,this.componentConnector=t.ComponentConnector,this.bridgeChannelManager=t.BridgeChannelManager}return Ci(e,[{key:"setupPostMessages",value:function(){var e=this;this.enabled&&(window.addEventListener("message",function(t){var n=t.data;if(n.event){var r=e.bridgeChannelManager.getPostMessageChannel(n.event),i=e.componentConnector.createEvent(n.event,n.detail);r.next(i)}}),this._sendPostMessage({event:"__bridge-ready"}),this.bridgeChannelManager.getBridgeChannel("send_post_message").subscribe(function(t){return e._sendPostMessage(t.detail)}))}},{key:"_sendPostMessage",value:function(e){window.parent&&window.parent.postMessage({eventName:e.event,eventDetail:e.detail},this.postMessageTargetOrigin)}}]),e}(),bs=ms,ws="__app_",Es="config",_s=function(){function e(t){var n=t.ActionChannelManager;Ti(this,e),this.ActionChannelManager=n,this.storage=this._getAppConfigStorage()}return Ai(e,[{key:"_getAppConfigStorage",value:function(){return new Lo({prefix:ws,persistent:!1})}},{key:"saveAppConfig",value:function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&this.ActionChannelManager.isAllowedProperty(n)&&(t[n]=e[n]);Object.keys(t).length>0&&this.storage.setItem(Es,t)}},{key:"loadAppConfig",value:function(){var e=this.storage.getItem(Es);for(var t in e)e.hasOwnProperty(t)&&this.ActionChannelManager.updateProperty(t,e[t])}}]),e}(),Ss=_s,Cs="__app_",ks="state",Ps=function(){function e(t){var n=t.ComponentConnector;Li(this,e),this.ComponentConnector=n,this.storage=this._getAppStateStorage()}return Mi(e,[{key:"_getAppStateStorage",value:function(){return new Lo({prefix:Cs,persistent:!1})}},{key:"saveAppState",value:function(e,t){var n=this.storage.getItem(ks)||{};n[e]=t,this.storage.setItem(ks,n)}},{key:"loadAppState",value:function(){var e=this.storage.getItem(ks);for(var t in e)this.ComponentConnector.publish(t,e[t])}}]),e}(),Os=Ps,Ts=xo.dasherize,xs=xo.camelize,As=xo.findProperty,js=wo.bindingCodes,Is=wo.binding,Rs=wo.componentsPath,Ls=wo.composerEndpoint,Ns=wo.externalEvents,Ms=wo.externalEventsCodes,Ds=wo.initialTemplate,Fs=wo.pagesPath,Bs=wo.prplCodes,Us=wo.prpl,Gs=wo.preRenderState,Hs=wo.renderEngines,Vs=wo.pageTypes,zs=Is.DEFAULT,qs=Us.DEFAULT,Ws=0,Ys={},Ks=function(){function e(t){var n=this;zi(this,e),this.ComponentConnector=null,this.DomManager=null,this.ImportManager=null,this.PageManager=null,this.Router=null,this.TemplateManager=null,this.Sanitizer=null,this.BridgeChannelManager=null,this.binding=zs,this.prplLevel=qs,this.cache=!0,this.channel="global",this.componentsPath=Rs,this.templatesPath="",this.crossContainerId="__cross",this.debug=!0,this.preCache=!1,this.preRender=!1,this.storagePrefix="__bridge-",this.version="3.20.1",this.viewLimit=1e3,this.initialTemplate=Ds,this.__mainNodeElement=null,this.externalEvents=Ns,this.pages=[],this.pagesPath=Fs,this.remoteTemplates=[],this.useComposerEngine=!1,this.appJson="",this.appId="",this.composerEndpoint=Ls,this.templatesPath="",this.monitoring=null,this.logs=!1,this.navRequestListener=null;var r=Ms.NAV_REQUEST,i=Ms.ROUTER_BACKSTEP;t&&"object"===Vi(t)||(t={}),t.prplLevel=this._normalizePrplLevel(t.prplLevel),this.preRenderingPages={};var o=t.dependencies;delete t.dependencies,Hi(this,t),this._initDependencies(o),"global"===this.channel&&(this.ComponentConnector.manager.channels=Ys),this.useComposerEngine&&this._initComposerEngine(),this.mainNode?this._plugExternalEvents():console.warn("You should indicate the main node of your app"),t.featureFlag&&(t.featureFlag.subscribe&&this.featureFlagCollection.subscribe(t.featureFlag.subscribe),t.featureFlag.defaultChangedCallback&&ds.defaultChangedCallback(t.featureFlag.defaultChangedCallback),t.featureFlag.defaultFeatures&&this.featureFlagCollection.update({features:t.featureFlag.defaultFeatures}),t.featureFlag.src&&fetch(t.featureFlag.src).then(function(e){return e.json()}).then(function(e){return n.featureFlagCollection.update(e)})),this.id=Ws++,this._initCrossComponents(),this.cache&&(this.PageManager.persistent=!0),this.generateRequestUrl&&(console.assert("function"==typeof this.generateRequestUrl,"generateRequestUrl has to be a function"),this.PageManager.generateRequestUrl=this.generateRequestUrl),this.onPageDefinitionNotFound&&(console.assert("function"==typeof this.onPageDefinitionNotFound,"onPageDefinitionNotFound has to be a function"),this.PageManager.onPageDefinitionNotFound=this.onPageDefinitionNotFound),this._sanitizePages(),this.interceptor&&"function"==typeof this.interceptor&&(this.Router.channelManager=this.BridgeChannelManager,this.Router.interceptor=this.interceptor),window.$core=window.$core||[],this.debug?(window.$core.push(this),this.printDebugInfo()):window.$core.push({log:function(e){return n.log(e)},ingest:function(e){return n.ingest(e)},createSpan:function(e){return n.createSpan(e)},createUUID:function(){return n.createUUID()},flush:function(){return n.flush()},logout:function(){return n.logout()},subscribeToEvent:function(e,t){return n.subscribeToEvent(e,t)},registerInConnection:function(e,t,r){return n.registerInConnection(e,t,r)},unsubscribe:function(e,t){return n.unsubscribe(e,t)},registerOutConnection:function(e,t,r,i){return n.registerOutConnection(e,t,r,i)},publish:function(e,t,r){return n.publish(e,t,r)},updateSubroute:function(e){return n.updateSubroute(e)},getCurrentRoute:function(){return n.getCurrentRoute()},navigate:function(e,t){return n.navigate(e,t)},updateApplicationConfig:function(e,t){return n.updateApplicationConfig(e,t)},updateFeatureFlagCollection:function(e){return n.updateFeatureFlagCollection(e)},getFeatureFlagCollection:function(){return n.getFeatureFlagCollection()},trackEvent:function(e){return n.trackEvent(e)},navigateToNative:function(e,t){return n.navigateToNative(e,t)},backStep:function(){return n.backStep()},updateInterceptorContext:function(e){return n.updateInterceptorContext(e)},resetInterceptorContext:function(){return n.resetInterceptorContext()},getInterceptorContext:function(){return n.getInterceptorContext()},setInterceptorContext:function(e){return n.setInterceptorContext(e)}}),window.cells=window.$core[0],this.BridgeChannelManager.initAppContextChannel(),this.BridgeChannelManager.getCancelledBackNavigationChannel(),this.BridgeChannelManager.getInterceptedNavigationChannel(),this.ActionChannelManager.subscribeAll(),this._executePendingBridgeQueue(),this.ApplicationConfigManager.loadAppConfig(),this.ApplicationStateManager.loadAppState(),this.logs&&this._logBridgeReady(),this.Router.handler=function(){return n.routeHandler()},this.Router.addRoutes(this.routes),this._initSkipNavigations(),this.Router.start(),this.navRequestListener=function(e){n.Router.hashIsDirty&&(window.location.hash="#!");var r=e.event,i=e.detail,o=i.page,a=i.params,u=i.skipHistory,s=i.cleanUntil,c=i.replace||!1,l={};if(!o&&i.paramPage&&r.detail&&(o=r.detail[i.paramPage]),r.detail&&a)for(var f in a)r.detail.hasOwnProperty(f)&&(l[a[f]]=r.detail[f]);s&&n.Router.clearStackUntil(s),n.Router.go(o,l,c,u),Hi(n,t)},to.on(r,this.navRequestListener),to.on(i,function(e){return n.handleBack(e)}),this.PostMessageManager.setupPostMessages(),this._ccRegister=[]}return Wi(e,[{key:"_sanitizePages",value:function(){var e=this;if(this.pages&&!this.pageDefinitions){for(var t=0;t<this.pages.length;t++)this.pages[t]={name:this.pages[t],type:Vs.STATIC,adapter:this.onlyLitElements?Hs.LIT_ELEMENT:void 0,hasModules:!1};this.pageDefinitions=this.pages}else if(this.pages&&this.pageDefinitions)for(var n=function(t){var n=e.pageDefinitions.findIndex(function(n){return n.name===e.pages[t]});n>-1?(e.pageDefinitions[n].type=e.pageDefinitions[n].type||Vs.STATIC,e.pages[t]=e.pageDefinitions[n]):(e.pages[t]={
name:e.pages[t],type:Vs.STATIC,adapter:e.onlyLitElements?Hs.LIT_ELEMENT:void 0,hasModules:!1},e.pageDefinitions.push(e.pages[t]))},r=0;r<this.pages.length;r++)n(r)}},{key:"updateInterceptorContext",value:function(e){this.Router.updateInterceptorContext(e)}},{key:"resetInterceptorContext",value:function(){this.Router.setInterceptorContext({})}},{key:"getInterceptorContext",value:function(){return this.Router.getInterceptorContext()}},{key:"setInterceptorContext",value:function(e){return this.Router.setInterceptorContext(e)}},{key:"updateFeatureFlagCollection",value:function(e){this.featureFlagCollection.update(e)}},{key:"getFeatureFlagCollection",value:function(){return this.featureFlagCollection.collection}},{key:"loadCellsPage",get:function(){return window.loadCellsPage}},{key:"goBack",value:function(){return this.Router.back()}},{key:"handleBack",value:function(){this.goBack()}},{key:"_executePendingBridgeQueue",value:function(){var e=this;Array.isArray(window.cellsBridgeQueue)&&(window.cellsBridgeQueue.forEach(function(t){var n=t.command,r=t.parameters,i=e[n];return i?(console.log("Executing queued command ".concat(n,".")),void i.apply(e,r)):void console.log("WARNING: Invalid cells bridge command execution: ".concat(n," (QUEUE)."))}),delete window.cellsBridgeQueue)}},{key:"_logBridgeReady",value:function(){var e=this.appId,t=this.version,n=this.binding,r=this.prplLevel,i=this.cache,o=this.preCache,a=this.preRender,u="cells-bridge::ready",s={appId:e,version:t,binding:n,href:window.location.href,prplLevel:r,cache:i,preCache:o,preRender:a},c={message:u,properties:s};this.logBridge(c)}},{key:"_initSkipNavigations",value:function(){if(this.skipNavigations&&this.skipNavigations.length>0){for(var e=0;e<this.skipNavigations.length;e++)this.skipNavigations[e].skipHistory=!0;this.Router.addSkipNavigations(this.skipNavigations)}}},{key:"_normalizePrplLevel",value:function(e){var t,n=Us.VALUES;return t=n.indexOf(e)>-1?e:n[e]||qs}},{key:"_dispatchEvent",value:function(e,t){var n=this.getMainNode(),r=t?new CustomEvent(e,{detail:t}):new CustomEvent(e);n.dispatchEvent(r)}},{key:"_plugExternalEvents",value:function(){var e=this,t=this.externalEvents.length,n=this.getMainNode();if(n){for(var r=function(){var t=e.externalEvents[i];to.on(t,function(n){e._dispatchEvent(t,n),e.logs&&e.monitor(t,n)})},i=0;i<t;i++)r();this._initEventChannels()}else console.warn("The defined main node does not exist")}},{key:"trackEvent",value:function(e){var t=Ms.TRACK_EVENT;to.emit(t,{detail:e})}},{key:"monitor",value:function(e,t){var n=Ms.LOG_EVENT,r=e===n,i=r||this.isBridgeLoggableEvent(e);if(i){var o=this.monitoring.buildLog(e,t),a=r?"log":"logBridge";this[a](o)}}},{key:"isBridgeLoggableEvent",value:function(e){return this.monitoring.isBridgeLoggableEvent(e)}},{key:"flush",value:function(){function e(){return t.apply(this,arguments)}var t=Gi(Bi().mark(function e(){return Bi().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.monitoring.flush());case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"log",value:function(e){this.hasApplicationLoggingEnabled()&&this.monitoring.logApplication(e)}},{key:"logBridge",value:function(e){this.hasBridgeLoggingEnabled()&&this.monitoring.logBridge(e)}},{key:"ingest",value:function(e){this.hasApplicationLoggingEnabled()&&this.monitoring.ingest(e)}},{key:"createSpan",value:function(e){return this.hasApplicationLoggingEnabled()?this.monitoring.createSpan(e):{start:function(){},finish:function(){}}}},{key:"createUUID",value:function(){return this.monitoring.createUUID()}},{key:"hasBridgeLoggingEnabled",value:function(){return this.monitoring.hasBridgeLoggingEnabled()}},{key:"hasApplicationLoggingEnabled",value:function(){return this.monitoring.hasApplicationLoggingEnabled()}},{key:"_initEventChannels",value:function(){var e=this.getMainNode();this.BridgeChannelManager.initEventChannels(e,this.externalEvents),this._addInitialSubscribersToEvents()}},{key:"_addInitialSubscribersToEvents",value:function(){this.eventSubscriptions&&this.eventSubscriptions.length>0&&this._subscribeToEvents(this.eventSubscriptions)}},{key:"_subscribeToEvents",value:function(e){var t=this;e.forEach(function(e){var n=e.event,r=e.callback;t.subscribeToEvent(n,r)})}},{key:"_initCrossComponents",value:function(){var e=this.TemplateManager.computeTemplateId(this.crossContainerId),t=this.TemplateManager.get(e),n=document.getElementById(e);t||(n?(this.usingDeclarativeCrossContainer=!0,this.TemplateManager.createTemplate(this.crossContainerId,{node:n})):(t=this.TemplateManager.createTemplate(this.crossContainerId,{tagName:"div"}),document.body.appendChild(t.node)))}},{key:"_initDependencies",value:function(e){e=Hi({ComponentConnector:Va,DomManager:Io,ImportManager:mu,TemplateManager:Su,PageManager:Bo,Router:vu,Sanitizer:Do,BridgeChannelManager:Lu,ActionChannelManager:Mu,monitoring:ys,featureFlagCollection:Ua,PostMessageManager:bs,ApplicationConfigManager:Ss,ApplicationStateManager:Os},e);for(var t in e)e.hasOwnProperty(t)&&(this[t]=new e[t](this))}},{key:"_initComposerEngine",value:function(){this.composerEngine=new Du(this.ComponentConnector.manager,composerEngine),this.composerEngine.init(),this.PageManager.composerEngine=this.composerEngine}},{key:"_createCellsComponent",value:function(e,t){var n=new bu(e,t);return e.featureFlag&&ds.extend(n,this),n}},{key:"createCCComponent",value:function(e){var t=this.TemplateManager.get(this.crossContainerId),n=e.properties.id,r=n?"#".concat(n):e.tagName,i=t.node.querySelector(r);if(!i){var o=this._createCellsComponent(e,this);return o.__parentTemplate=t,this.ComponentConnector.registerComponent(o),this._ccRegister.push(this._getCCData(o.node,o.connections)),o}this._ccRegister.filter(function(e){return e.node===i}).length||this._ccRegister.push(this._getCCData(i,e.connections)),this.ComponentConnector.progressiveRegisterConnections(i,e.connections)}},{key:"_getCCData",value:function(e,t){return{node:e,connections:t}}},{key:"createUIComponent",value:function(e){var t=js.ALWAYS,n=js.DELAYED,r=js.UI,i=this.binding,o=this._createCellsComponent(e,this);return i!==t&&i!==n&&i!==r||this.ComponentConnector.registerComponent(o),o}},{key:"createDMComponent",value:function(e){var t=js.ALWAYS,n=js.DELAYED,r=this.binding,i=this._createCellsComponent(e,this);return r!==t&&r!==n||this.ComponentConnector.registerComponent(i),i}},{key:"createComponentsByType",value:function(e,t){var n=this;return[].concat(e.CC.map(function(e){return n.createCCComponent(e)})).concat(e.UI.map(function(e){return n.createUIComponent(e)})).concat(e.DM.map(function(e){return n.createDMComponent(e)})).filter(function(e){return void 0!=e}).map(function(e){return e.__parentTemplate=e.__parentTemplate||t,e})}},{key:"_insideLayout",value:function(e){return void 0!=e&&2===e.split(".").length}},{key:"_createComponents",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Ms.PAGE_READY,o=e.page,a=this,u=this.Sanitizer.split(e.components),s=this.createComponentsByType(u,t),c=[],l=[],f=As("featureFlag");s.map(function(e){return f(e.spec.connections)}).forEach(this.featureFlagCollection.add,this.featureFlagCollection);var p=s.filter(function(e){return n._insideLayout(e.zone)});s=s.filter(function(e){return!n._insideLayout(e.zone)}),s=s.concat(p);for(var h=0,v=s.length;h<v;h++){s[h].setProps(),s[h].setAttrs();var y=s[h],d=y.__parentTemplate.name;l[d]||(l[d]=this.TemplateManager.get(d)),l[d].append(y);var g=this.ComponentConnector.adapterResolver.getComponentAdapter(y);g.isUnresolved(y.node)&&c.push(y)}switch(to.emit(i,{page:o,components:e.components.map(function(e){return e.tagName}).join(", ")}),this.prplLevel){case Bs.NONE:case Bs.DEFER:this.ImportManager.loadComponent(c,a.componentsPath).then(function(){n.selectTemplate(o,r)});break;case Bs.PROGRESSIVE:this.ImportManager.loadComponent(c,a.componentsPath);break;case Bs.HERO:this.selectTemplate(o,r),this.ImportManager.loadComponentByPriority(c,a.componentsPath)}}},{key:"createPageFromWebComponent",value:function(e){var t=e.name,n=e.hasModules,r="".concat(t,"-page"),i=this.TemplateManager.getNode(t);if(this.BridgeChannelManager.getPrivate(t),!i){i=this.TemplateManager.createTemplate(t,{tagName:r});var o=this.ComponentConnector.adapterResolver.getAdapterByName(e.adapter);if(o.isUnresolved(i.node)){if(e.adapter===Hs.POLYMER)return this.loadPolymerWebComponent(t,n);if(this.loadCellsPage)return this.loadCellsPage(t)}}return Promise.resolve()}},{key:"_isLocalTemplate",value:function(e){var t=!0;return this.composerEndpoint&&this.remoteTemplates&&(t=this.remoteTemplates.indexOf(e)===-1),t}},{key:"createTemplate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e,i=e.page,o=this.TemplateManager.getNode(i),a=this.composerEngine&&!this.PageManager._isLocalComposer(i);this.BridgeChannelManager.getPrivate(i);var u=this.getPageDefinition(i),s=u.adapter;if(!s){var c=[].concat(r.components||[]);c.push(r.template||{});var l=c.filter(function(e){return"litElement"===e.render}).length>0,f=c.filter(function(e){return"polymer"===e.render||void 0===e.render}).length>0;f&&!l?s=Hs.POLYMER:!f&&l&&(s=Hs.LIT_ELEMENT)}var p=this.initialBundle.map(function(e){return e.replace(/(\.js$|\.json$|-page(\.json|\.html)*)/,"")}),h=p.indexOf(i)>-1;return!n&&this.preRenderingPages[i]?void(this.preRenderingPages[i]=Gs.REQUESTED):(o&&!a?this.selectTemplate(i,n):r&&r.template&&(this.prplLevel===Bs.DEFER&&this._isLocalTemplate(i)&&!h?s===Hs.POLYMER?this.ImportManager.loadBundleForTemplate(this.componentsPath,i).then(function(){t._createTemplateFromSpec(i,r,n)}):s===Hs.LIT_ELEMENT?this.loadCellsPage?this.loadCellsPage(i).then(function(){return t._createTemplateFromSpec(i,r,n)}):this._createTemplateFromSpec(i,r,n):this.loadCellsPage?this.loadCellsPage("".concat(i,"-modules")).then(function(){t.ImportManager.loadBundleForTemplate(t.componentsPath,i).then(function(){t._createTemplateFromSpec(i,r,n)})}):this.ImportManager.loadBundleForTemplate(this.componentsPath,i).then(function(){t._createTemplateFromSpec(i,r,n)}):this._createTemplateFromSpec(i,r,n)),void this._preRender(e,n))}},{key:"_preRender",value:function(e,t){var n=this;if((this.preCache===!0||this.preRender===!0)&&e.pages)for(var r in e.pages)if(e.pages.hasOwnProperty(r)){var i=r===name||this.TemplateManager.cache[r];if(i)continue;this.preRender&&t===!1&&(this.preRenderingPages[r]=Gs.WORKING),this.loadTemplate(r).then(function(e){if(n.preRender&&t===!1){var r=!0;e.page?n._idleCallback(function(){return n.createTemplate(e,r)}):console.warn("Missing page. ",e)}})}}},{key:"_createTemplateFromSpec",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.TemplateManager.createTemplate(e,t.template,r);this.prplLevel===Bs.PROGRESSIVE&&this.selectTemplate(e,r),this.ComponentConnector.registerComponent(i),t.pages&&this.Router.addRoutes(t.pages);var o=this.ComponentConnector.adapterResolver.getComponentAdapter(i);if(o.isUnresolved(i.node))switch(this.prplLevel){case Bs.NONE:case Bs.DEFER:this.ImportManager.loadComponent(i,this.componentsPath).then(function(){n._createComponents(t,i,r)});break;case Bs.PROGRESSIVE:case Bs.HERO:this._createComponents(t,i,r)}else this._createComponents(t,i,r)}},{key:"computeTemplateId",value:function(e){return"cells-template-"+e.replace(/\./g,"-")}},{key:"parse",value:function(e,t){return e=xs("parse-"+e),"function"==typeof this[e]?this[e](t):t}},{key:"printDebugInfo",value:function(){var e=function(e,t){var n=e?t:"#b0bec5";return"background:".concat(n,"; color:#fff; padding:2px 4px; margin-right: 5px;")};console.log("%cbridge version: ".concat(this.version," %cbinding: ").concat(this.binding," %cprplLevel: ").concat(this.prplLevel," %ccache: ").concat(this.cache," %cpreCache: ").concat(this.preCache," %cpreRender: ").concat(this.preRender," %clogs: ").concat(this.logs),e(this.version,"#003f8d"),e(this.binding,"#0065ba"),e(this.prplLevel,"#008ff2"),e(this.cache,"#0093e2"),e(this.preCache,"#00aeeb"),e(this.preRender,"#41cef8"),e(this.logs,"#0025ad")),this.id>0&&console.log("%cWARNING: There are ".concat(this.id+1," simultaneous instances of the Bridge running."),e(this.id,"#FF0000"))}},{key:"routeHandler",value:function(){var e=Ms.PARSE_ROUTE,t=this.Router.currentRoute;to.emit(e,t),this._handleRouteLoading(t);for(var n in t.params){var r={detail:{value:t.params[n]},type:Ts(n)+"-changed"};this.ComponentConnector.manager.get(n).next(r)}}},{key:"getPageDefinition",value:function(e){var t={name:e,type:Vs.DYNAMIC,adapter:Hs.POLYMER},n=t,r=this.pageDefinitions.filter(Boolean).filter(function(t){return t.name===e});return 0===r.length?this.pageDefinitions.push(t):n=r[0],n}},{key:"loadTemplate",value:function(e,t){var n=this.cache,r=this.method,i=this.body,o=this.headers,a=this.app,u=this.templatesPath,s={cache:n,params:t,method:r,body:i,headers:o},c={app:a,templates:u};return this.PageManager.get(e,s,c)}},{key:"loadPolymerWebComponent",value:function(){function e(e,n){return t.apply(this,arguments)}var t=Gi(Bi().mark(function e(t,n){var r,i,o;return Bi().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Array(2).fill("".concat(t,"-page")).join("/"),i={spec:{path:"".concat(r,".html")}},!n){e.next=6;break}return o="".concat(t,"-modules"),e.next=6,this.loadCellsPage(o);case 6:return e.abrupt("return",this.ImportManager.loadComponent(i,this.pagesPath));case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"_handleRouteLoading",value:function(e){var t=this,n=this.getPageDefinition(e.name);n.type===Vs.STATIC?this.createPageFromWebComponent(n).then(function(){return t.selectPage(e.name,e.params)}):this.loadTemplate(e.name,e.params).then(function(e){return t.createTemplate(e)})}},{key:"registerCurrentTemplate",value:function(e,t){var n=Ms.TEMPLATE_REGISTERED,r=js.UI,i=this;t&&t!==e&&this.unregisterChildren(t,i.binding===r?"DM":null),this.registerChildren(e,i.binding===r?"DM":null),this._updateChannels(t,e),to.emit(n,{template:e.name})}},{key:"_updateChannels",value:function(e,t){if(this.BridgeChannelManager){var n=e?e.name:void 0,r=this.getInterceptorContext(),i=this.getCurrentRoute();this.BridgeChannelManager.updateBridgeChannels(n,t.name,r,i)}}},{key:"registerChildren",value:function(e,t){for(var n=0;n<e.children.length;n++){var r=e.children[n];(t&&t===r.type||!t)&&this.ComponentConnector.registerComponent(r)}}},{key:"unregisterChildren",value:function(e,t){for(var n=0;n<e.children.length;n++){var r=e.children[n];(t&&t===r.type||!t)&&this.ComponentConnector.unregisterComponent(r.node)}}},{key:"registerInConnection",value:function(e,t,n){this.ComponentConnector.addSubscription(e,t,n)}},{key:"registerOutConnection",value:function(e,t,n,r){this.ComponentConnector.addPublication(e,t,n,r)}},{key:"unsubscribe",value:function(e,t){this.ComponentConnector.unsubscribe(e,t)}},{key:"publish",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.sessionStorage;this.ComponentConnector.publish(e,t),r===!0&&this.ApplicationStateManager.saveAppState(e,t)}},{key:"updateApplicationConfig",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.sessionStorage,r="__bridge_ch_config";this.publish(r,e),n===!0&&this.ApplicationConfigManager.saveAppConfig(e)}},{key:"updateSubroute",value:function(e){this.Router.updateSubrouteInBrowser(e)}},{key:"getCurrentRoute",value:function(){var e=this.Router.currentRoute,t=e.name,n=e.params,r=e.query,i=e.subroute;return{name:t,params:n,query:r,subroute:i,hashPath:this.Router._getHashPath()}}},{key:"navigate",value:function(e,t){this.Router.go(e,t)}},{key:"navigateToNative",value:function(e,t){}},{key:"backStep",value:function(){var e=Ms.ROUTER_BACKSTEP;to.emit(e,{event:{},detail:{}})}},{key:"_waitRenderComplete",value:function(e){return e.node.updateComplete||Promise.resolve()}},{key:"selectPage",value:function(e,t){var n=this,r=Ms.TEMPLATE_REGISTERED,i=this.TemplateManager.get(e),o=this.TemplateManager.get(this.TemplateManager.selected),a=o?o.name:null;this.onRender&&this.onRender(i.node),Gi(Bi().mark(function o(){var u,s;return Bi().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,n._waitRenderComplete(i);case 2:n._handleParams(i.node,t),u=n.getInterceptorContext(),s=n.getCurrentRoute(),n.TemplateManager.select(e,n.BridgeChannelManager,n.binding,u,s),n.BridgeChannelManager&&n.BridgeChannelManager.updateBridgeChannels(a,e,u,s),to.emit(r,{template:e});case 8:case"end":return o.stop()}},o)}))()}},{key:"_handleParams",value:function(e,t){var n=e.params&&Object.keys(t).length>0;n&&(e.params=t)}},{key:"selectTemplate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Ms.TEMPLATE_TRANSITION_END,i=js.CURRENTVIEW,o=js.UI,a=js.DELAYED,u=this,s=this.TemplateManager.get(e),c=n!==!0||this.preRenderingPages[e]===Gs.REQUESTED;if((u.binding===i||u.binding===o)&&c){var l=this.TemplateManager.get(this.TemplateManager.selected),f=function(){return t.registerCurrentTemplate(s,l)};s.node.animationCompleteEvent?to.listenToOnce(s.node,s.node.animationCompleteEvent,f):to.once(r,f)}if(u.onRender&&(s.fixedChildren.length>0?u.onRender(s.node,s.fixedChildren):u.onRender(s.node)),n&&delete this.preRenderingPages[e],c){var p=this.getInterceptorContext(),h=this.getCurrentRoute(),v=function(){return t.TemplateManager.select(e,t.BridgeChannelManager,u.binding,p,h)};u.binding===a?this._idleCallback(v):v()}}},{key:"_idleCallback",value:function(e){this.BridgeChannelManager.getIdleCallbackChannel().subscribe(e)}},{key:"subscribeToEvent",value:function(e,t){if(this.externalEvents.indexOf(e)<0)return void console.warn("Trying to subscribe to a non existing event: ",e);if("function"!=typeof t)return void console.warn("You must provide a function callback to subscribe to the event: ",e);var n=this.getMainNode();this.BridgeChannelManager.subscribeToEvent(n,e,t)}},{key:"getMainNode",value:function(){return this.__mainNodeElement||(this.__mainNodeElement=document.querySelector("#"+this.mainNode)),this.__mainNodeElement}},{key:"_disconnectCrossComponents",value:function(e,t){var n=this,r=e.inConnections,i=e.outConnections;null===r||void 0===r||r.forEach(function(e){n.ComponentConnector.unregisterComponent(e.component,t)}),null===i||void 0===i||i.forEach(function(e){n.ComponentConnector.unregisterComponent(e.component,t)})}},{key:"_reconnectCrossComponents",value:function(e){var t=this,n=e.inConnections,r=e.outConnections;null===n||void 0===n||n.forEach(function(e){t.registerInConnection(e.channel,e.component,e.bind)}),null===r||void 0===r||r.forEach(function(e){t.registerOutConnection(e.channel,e.component,e.bind,e.options)})}},{key:"_filterdynamic",value:function(e){var t=this;return e.filter(function(e){return 0===t._ccRegister.filter(function(t){return t.node===e.component}).length})}},{key:"_filterDynamicCrossComponents",value:function(e){e.inConnections=this._filterdynamic(e.inConnections||[]),e.outConnections=this._filterdynamic(e.outConnections||[])}},{key:"_cleanDynamicCrossComponents",value:function(){this._ccRegister.forEach(function(e){e.node.parentNode.removeChild(e.node)}),this._ccRegister=[]}},{key:"_resetBridgeChannels",value:function(){var e=!0,t=this.TemplateManager.computeTemplateId(this.crossContainerId),n=this.BridgeChannelManager.getCCSubscriptions(t,this.getMainNode().id)||{};this._disconnectCrossComponents(n,e),this.BridgeChannelManager.resetBridgeChannels(this.getMainNode(),e),this._filterDynamicCrossComponents(n),this._cleanDynamicCrossComponents(),this._reconnectCrossComponents(n)}},{key:"logout",value:function(){this.TemplateManager.selected!==this.initialTemplate&&(this.BridgeChannelManager.publishPrivatePageStatus(this.TemplateManager.selected,!1),this._resetBridgeChannels(),this.usingDeclarativeCrossContainer||this.TemplateManager.removeTemplateChildrens(this.crossContainerId),this.TemplateManager.removeTemplates(void 0,this.crossContainerId),this.ActionChannelManager.subscribeAll(),this._addInitialSubscribersToEvents(),this.composerEngine&&this.composerEngine.reset(),this.resetInterceptorContext(),this.Router.init(),this.Router.go(this.initialTemplate))}}]),e}(),Js={native:{windowExport:"CellsNativeBridge",library:"cellsNative",file:"cells-native-bridge",version:"0.11.0"},core:{windowExport:"CellsPolymerBridge",library:"cells",file:"cells-polymer-bridge"}}.core||{native:{windowExport:"CellsNativeBridge",library:"cellsNative",file:"cells-native-bridge",version:"0.11.0"},core:{windowExport:"CellsPolymerBridge",library:"cells",file:"cells-polymer-bridge"}}.core,Qs=Js.windowExport;window[Qs]=Ks}])});
//# sourceMappingURL=cells-polymer-bridge.min.js.map